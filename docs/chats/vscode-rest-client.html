<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chats/vscode-rest-client" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">vscode-rest-client | Fan&#x27;s life</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://only1zf.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://only1zf.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://only1zf.com/docs/chats/vscode-rest-client"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="vscode-rest-client | Fan&#x27;s life"><meta data-rh="true" name="description" content="USER"><meta data-rh="true" property="og:description" content="USER"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://only1zf.com/docs/chats/vscode-rest-client"><link data-rh="true" rel="alternate" href="https://only1zf.com/docs/chats/vscode-rest-client" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://only1zf.com/docs/chats/vscode-rest-client" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1b12b40b.css">
<script src="/assets/js/runtime~main.0d787353.js" defer="defer"></script>
<script src="/assets/js/main.37eedf8c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Fan&#x27;s life</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/commentary">读考</a><a class="navbar__item navbar__link" href="/docs/prompts/dict">Prompts</a><a class="navbar__item navbar__link" href="/docs/refs/REST-Client">References</a><a class="navbar__item navbar__link" href="/docs/excerpts/AI/a-common-translation-prompt-for-different-languages">Excerpts</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>vscode-rest-client</h1></header><h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user">USER<a href="#user" class="hash-link" aria-label="USER的直接链接" title="USER的直接链接" translate="no">​</a></h3>
<p>VSCode 插件 REST client 中如何将返回的结果 body 中的部分字段自动保存至指定文件</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="assistant">ASSISTANT<a href="#assistant" class="hash-link" aria-label="ASSISTANT的直接链接" title="ASSISTANT的直接链接" translate="no">​</a></h3>
<details type="reasoning" done="true" duration="14" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Thought for 14 seconds</summary><div><div class="collapsibleContent_i85q"><blockquote>
<p>在 REST Client 插件中，你可以通过编写脚本来处理响应并将部分字段保存到文件中。以下是一个示例步骤：</p>
<ol>
<li class="">首先，在 <code>.http</code> 文件中发送请求，然后使用 <code>&gt; { ... }</code> 来指定保存响应的部分内容到文件。</li>
<li class="">在响应处理脚本中，你可以使用 JavaScript 代码来解析响应体（通常是 JSON），然后提取你需要的字段。</li>
<li class="">将提取的内容写入到指定的文件中。</li>
</ol>
<p>这里有一个例子：</p>
<p>假设我们有一个API返回如下JSON：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;John Doe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;email&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;john@example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>我们想要将 <code>name</code> 和 <code>email</code> 保存到一个文本文件中，格式为：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Name: John Doe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Email: john@example.com</span><br></span></code></pre></div></div>
<p>在 REST Client 的请求文件中，你可以这样写：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://example.com/api/user/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Accept: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 获取响应体</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const body = response.body;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 解析JSON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const data = JSON.parse(body);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 构造要保存的字符串</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const content = `Name: ${data.name}\nEmail: ${data.email}`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 将内容写入到 user-info.txt 文件中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(&#x27;fs&#x27;).writeFileSync(&#x27;user-info.txt&#x27;, content);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<p>当你发送这个请求时，插件会执行脚本，将内容写入到当前工作目录下的 <code>user-info.txt</code> 文件中。</p>
<p>注意：</p>
<ul>
<li class="">脚本在响应返回后执行，所以你可以使用 <code>response</code> 对象。</li>
<li class="">脚本是JavaScript，并且运行在Node.js环境中，因此你可以使用Node.js的模块，如 <code>fs</code>。</li>
<li class="">文件路径是相对于当前工作目录的，你也可以使用绝对路径。</li>
</ul>
<p>如果你只想保存部分字段的原始JSON，可以这样：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://example.com/api/user/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Accept: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const body = response.body;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const data = JSON.parse(body);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 提取需要的字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const extracted = { name: data.name, email: data.email };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 将提取的对象转为JSON字符串</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const content = JSON.stringify(extracted, null, 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(&#x27;fs&#x27;).writeFileSync(&#x27;user-info.json&#x27;, content);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<p>这样就会保存为JSON文件。</p>
<p>另外，REST Client 也支持直接将整个响应保存到文件，但如果你需要提取部分字段，就需要使用脚本。</p>
<p>例如，直接将整个响应保存到文件可以这样（不需要脚本）：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET http://example.com/api/user/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Accept: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output.txt</span><br></span></code></pre></div></div>
<p>但这种方式会保存整个响应（包括状态码、头部和体），而且不是只提取部分字段。</p>
<p>所以，根据你的需求，选择合适的方式。如果你需要提取部分字段，使用脚本是灵活的。</p>
</blockquote></div></div></details>
<p>在 REST Client 插件中，您可以通过编写响应处理脚本将返回结果中的字段自动保存到文件。以下是详细步骤：</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-基本保存操作">1. <strong>基本保存操作</strong><a href="#1-基本保存操作" class="hash-link" aria-label="1-基本保存操作的直接链接" title="1-基本保存操作的直接链接" translate="no">​</a></h3>
<p>在 <code>.http</code> 文件中使用 <code>&gt;</code> 符号直接将整个响应保存到文件：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ./response.json</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-提取部分字段并保存">2. <strong>提取部分字段并保存</strong><a href="#2-提取部分字段并保存" class="hash-link" aria-label="2-提取部分字段并保存的直接链接" title="2-提取部分字段并保存的直接链接" translate="no">​</a></h3>
<p>使用 JavaScript 脚本处理响应，提取特定字段后保存：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{ &quot;username&quot;: &quot;test&quot;, &quot;password&quot;: &quot;123&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 解析 JSON 响应</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const body = JSON.parse(response.body);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 提取 token 和 userId 字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const { token, userId } = body;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 写入文件（Node.js 语法）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs.writeFileSync(&#x27;auth-token.txt&#x27;, token);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs.writeFileSync(&#x27;user-id.txt&#x27;, userId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 可选：控制台输出提示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.log(&quot;Token saved to auth-token.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-高级示例动态文件名">3. <strong>高级示例：动态文件名</strong><a href="#3-高级示例动态文件名" class="hash-link" aria-label="3-高级示例动态文件名的直接链接" title="3-高级示例动态文件名的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/users/123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const user = JSON.parse(response.body);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const filename = `user-${user.id}.json`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 仅保存 name 和 email 字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const dataToSave = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: user.name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email: user.email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(&#x27;fs&#x27;).writeFileSync(filename, JSON.stringify(dataToSave, null, 2));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-循环保存多个字段">4. <strong>循环保存多个字段</strong><a href="#4-循环保存多个字段" class="hash-link" aria-label="4-循环保存多个字段的直接链接" title="4-循环保存多个字段的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/products</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const products = JSON.parse(response.body);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 提取所有产品的名称和价格</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const simplified = products.map(p =&gt; ({ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id: p.id, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: p.name, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        price: p.price </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs.writeFileSync(&#x27;products-summary.json&#x27;, JSON.stringify(simplified, null, 2));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="关键点说明">关键点说明：<a href="#关键点说明" class="hash-link" aria-label="关键点说明：的直接链接" title="关键点说明：的直接链接" translate="no">​</a></h3>
<ol>
<li class=""><strong>脚本位置</strong>：在请求后使用 <code>&gt; {% ... %}</code> 包裹 JavaScript 代码</li>
<li class=""><strong>可用对象</strong>：<!-- -->
<ul>
<li class=""><code>response.body</code>：响应体内容（字符串）</li>
<li class=""><code>response.headers</code>：响应头信息</li>
<li class=""><code>require(&#x27;fs&#x27;)</code>：Node.js 文件系统模块</li>
</ul>
</li>
<li class=""><strong>文件路径</strong>：<!-- -->
<ul>
<li class="">相对路径基于当前工作目录（通常是项目根目录）</li>
<li class="">使用 <code>../</code> 返回上级目录，如 <code>../data/result.json</code></li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="常见问题解决">常见问题解决：<a href="#常见问题解决" class="hash-link" aria-label="常见问题解决：的直接链接" title="常见问题解决：的直接链接" translate="no">​</a></h3>
<ol>
<li class=""><strong>文件写入失败</strong>：<!-- -->
<ul>
<li class="">检查目录是否存在</li>
<li class="">使用绝对路径：<code>fs.writeFileSync(&#x27;D:/data/result.json&#x27;, content)</code></li>
</ul>
</li>
<li class=""><strong>特殊字段处理</strong>：<!-- -->
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 处理嵌套字段</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> city </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">city</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li class=""><strong>非 JSON 响应</strong>：<!-- -->
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 文本响应处理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">includes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Success&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;status.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ol>
<blockquote>
<p><strong>注意</strong>：REST Client 使用 Node.js 运行时执行脚本，确保您的 VSCode 有 Node.js 环境支持。保存操作会在每次请求成功后自动执行。</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user-1">USER<a href="#user-1" class="hash-link" aria-label="USER的直接链接" title="USER的直接链接" translate="no">​</a></h3>
<p>如何从文件中提取部分字段作为 query_string 的参数？</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="assistant-1">ASSISTANT<a href="#assistant-1" class="hash-link" aria-label="ASSISTANT的直接链接" title="ASSISTANT的直接链接" translate="no">​</a></h3>
<details type="reasoning" done="true" duration="16" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Thought for 16 seconds</summary><div><div class="collapsibleContent_i85q"><blockquote>
<p>在 REST Client 插件中，我们可以通过读取文件内容并解析，然后提取需要的字段作为查询参数。以下步骤说明如何实现：</p>
<ol>
<li class=""><strong>读取文件内容</strong>：使用 Node.js 的 <code>fs</code> 模块读取文件。</li>
<li class=""><strong>解析内容</strong>：如果文件是 JSON 格式，使用 <code>JSON.parse</code> 解析；如果是其他格式，根据情况处理。</li>
<li class=""><strong>提取字段</strong>：从解析后的对象中提取需要的字段。</li>
<li class=""><strong>构造查询字符串</strong>：将提取的字段转换为查询字符串格式。</li>
<li class=""><strong>设置变量</strong>：将构造的查询字符串存入变量，然后在请求中使用。</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="示例场景">示例场景<a href="#示例场景" class="hash-link" aria-label="示例场景的直接链接" title="示例场景的直接链接" translate="no">​</a></h3>
<p>假设我们有一个 <code>config.json</code> 文件，内容如下：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;apiKey&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your_api_key&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;userId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;role&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;admin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>我们想将 <code>apiKey</code> 和 <code>userId</code> 作为查询参数。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="步骤">步骤<a href="#步骤" class="hash-link" aria-label="步骤的直接链接" title="步骤的直接链接" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-在-http-文件中编写脚本">1. 在 <code>.http</code> 文件中编写脚本<a href="#1-在-http-文件中编写脚本" class="hash-link" aria-label="1-在-http-文件中编写脚本的直接链接" title="1-在-http-文件中编写脚本的直接链接" translate="no">​</a></h4>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 动态构造查询参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data?{{queryString}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 读取 config.json 文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const config = JSON.parse(fs.readFileSync(&#x27;config.json&#x27;, &#x27;utf8&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 提取需要的字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const params = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        apiKey: config.apiKey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userId: config.userId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 构造查询字符串</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const queryString = Object.keys(params)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .map(key =&gt; `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .join(&#x27;&amp;&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 将查询字符串保存到变量中，供请求URL使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.global.set(&#x27;queryString&#x27;, queryString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-在请求url中使用变量">2. 在请求URL中使用变量<a href="#2-在请求url中使用变量" class="hash-link" aria-label="2. 在请求URL中使用变量的直接链接" title="2. 在请求URL中使用变量的直接链接" translate="no">​</a></h4>
<p>注意：在请求URL中，我们使用 <code>{{queryString}}</code> 来插入变量。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="说明">说明<a href="#说明" class="hash-link" aria-label="说明的直接链接" title="说明的直接链接" translate="no">​</a></h3>
<ul>
<li class="">脚本在发送请求之前执行，所以变量 <code>queryString</code> 会在请求发送前被设置。</li>
<li class=""><code>client.global.set</code> 用于设置全局变量，该变量可以在后续请求中重复使用（直到被重新设置或VSCode重启）。</li>
<li class="">使用 <code>encodeURIComponent</code> 对参数进行编码，确保特殊字符正确处理。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="多个请求共享变量">多个请求共享变量<a href="#多个请求共享变量" class="hash-link" aria-label="多个请求共享变量的直接链接" title="多个请求共享变量的直接链接" translate="no">​</a></h3>
<p>如果需要在多个请求中共享同一个变量，可以将设置变量的脚本单独放在一个请求中，然后后续请求使用该变量。</p>
<p>例如，先执行一个设置变量的请求：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 设置查询参数变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># @name setVars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/dummy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 同上读取文件并设置变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.global.set(&#x27;queryString&#x27;, queryString);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<p>然后在后续请求中使用：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 使用变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data?{{queryString}}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="注意">注意<a href="#注意" class="hash-link" aria-label="注意的直接链接" title="注意的直接链接" translate="no">​</a></h3>
<ul>
<li class="">文件路径是相对于当前工作目录（通常是项目根目录）的。</li>
<li class="">如果文件内容不是JSON，需要调整解析方式（如使用 <code>fs.readFileSync</code> 读取文本，然后自行分割处理）。</li>
<li class="">确保文件存在，否则会抛出异常。</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="其他格式文件示例如文本">其他格式文件示例（如文本）<a href="#其他格式文件示例如文本" class="hash-link" aria-label="其他格式文件示例（如文本）的直接链接" title="其他格式文件示例（如文本）的直接链接" translate="no">​</a></h3>
<p>假设有一个 <code>params.txt</code> 文件，内容为：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiKey=abc123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userId=456</span><br></span></code></pre></div></div>
<p>我们可以这样解析：</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;params.txt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">line</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> line</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;=&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        params</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 然后继续构造查询字符串</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接" translate="no">​</a></h3>
<p>通过上述方法，我们可以从文件中提取字段并动态构造查询字符串，使得请求参数可以外部配置，便于管理和复用。</p>
</blockquote></div></div></details>
<p>在 REST Client 插件中，您可以从文件中提取字段作为查询字符串(query_string)参数。以下是几种实现方式：</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方法一使用脚本从文件中读取并设置查询参数">方法一：使用脚本从文件中读取并设置查询参数<a href="#方法一使用脚本从文件中读取并设置查询参数" class="hash-link" aria-label="方法一：使用脚本从文件中读取并设置查询参数的直接链接" title="方法一：使用脚本从文件中读取并设置查询参数的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 从文件提取参数并发送请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># @name getToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 读取文件内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const config = JSON.parse(fs.readFileSync(&#x27;config.json&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 提取所需字段</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const apiKey = config.apiKey;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const userId = config.userId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 保存为全局变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.global.set(&#x27;apiKey&#x27;, apiKey);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.global.set(&#x27;userId&#x27;, userId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 使用提取的参数发送请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data?api_key={{apiKey}}&amp;user_id={{userId}}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方法二直接读取文件并构造查询字符串">方法二：直接读取文件并构造查询字符串<a href="#方法二直接读取文件并构造查询字符串" class="hash-link" aria-label="方法二：直接读取文件并构造查询字符串的直接链接" title="方法二：直接读取文件并构造查询字符串的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 直接提取文件参数构造URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data?{{queryParams}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const config = JSON.parse(fs.readFileSync(&#x27;config.json&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 构造查询字符串</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const queryParams = new URLSearchParams({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        api_key: config.apiKey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        user_id: config.userId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        region: config.settings.region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }).toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.global.set(&#x27;queryParams&#x27;, queryParams);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="方法三使用前置请求准备参数">方法三：使用前置请求准备参数<a href="#方法三使用前置请求准备参数" class="hash-link" aria-label="方法三：使用前置请求准备参数的直接链接" title="方法三：使用前置请求准备参数的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 准备查询参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># @name prepareParams</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/dummy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const config = JSON.parse(require(&#x27;fs&#x27;).readFileSync(&#x27;config.json&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client.global.set(&#x27;q&#x27;, `api_key=${config.apiKey}&amp;user_id=${config.userId}`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 使用准备的参数发送请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data?{{q}}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="文件示例-configjson">文件示例 (config.json)<a href="#文件示例-configjson" class="hash-link" aria-label="文件示例 (config.json)的直接链接" title="文件示例 (config.json)的直接链接" translate="no">​</a></h3>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;apiKey&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your_api_key_here&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;userId&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;12345&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;settings&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;region&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;us-east-1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;timeout&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="关键点说明-1">关键点说明：<a href="#关键点说明-1" class="hash-link" aria-label="关键点说明：的直接链接" title="关键点说明：的直接链接" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>文件读取</strong>：使用 Node.js 的 <code>fs</code> 模块读取文件</p>
</li>
<li class="">
<p><strong>路径处理</strong>：</p>
<ul>
<li class="">相对路径基于当前工作目录（通常是项目根目录）</li>
<li class="">使用绝对路径：<code>fs.readFileSync(&#x27;/absolute/path/to/file.json&#x27;)</code></li>
</ul>
</li>
<li class="">
<p><strong>复杂字段处理</strong>：</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 处理嵌套字段</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> region </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">settings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">region</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 处理数组字段</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tags </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">tags</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;,&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li class="">
<p><strong>URL编码</strong>：</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 确保特殊字符正确编码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> encodedValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encodeURIComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">specialParam</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="动态文件名示例">动态文件名示例：<a href="#动态文件名示例" class="hash-link" aria-label="动态文件名示例：的直接链接" title="动态文件名示例：的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 根据日期读取不同配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data?{{dailyParams}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const date = new Date().toISOString().slice(0, 10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fileName = `config-${date}.json`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (fs.existsSync(fileName)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const config = JSON.parse(fs.readFileSync(fileName));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const params = new URLSearchParams(config.queryParams).toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        client.global.set(&#x27;dailyParams&#x27;, params);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        client.log(`File ${fileName} not found`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="注意事项">注意事项：<a href="#注意事项" class="hash-link" aria-label="注意事项：的直接链接" title="注意事项：的直接链接" translate="no">​</a></h3>
<ol>
<li class="">文件读取是同步操作，对于大文件可能阻塞请求</li>
<li class="">确保文件存在且有读取权限</li>
<li class="">敏感数据（如API密钥）应存储在安全位置</li>
<li class="">路径问题解决方案：<!-- -->
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 使用绝对路径避免问题</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;config&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;api-keys.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ol>
<p>这些方法让您能够灵活地从各种格式的文件（JSON、文本等）中提取参数，并动态构造查询字符串，实现配置和请求的分离。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user-2">USER<a href="#user-2" class="hash-link" aria-label="USER的直接链接" title="USER的直接链接" translate="no">​</a></h3>
<p>GET 如果是 body 从文件中读入应该怎么写？</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="assistant-2">ASSISTANT<a href="#assistant-2" class="hash-link" aria-label="ASSISTANT的直接链接" title="ASSISTANT的直接链接" translate="no">​</a></h3>
<details type="reasoning" done="true" duration="12" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Thought for 12 seconds</summary><div><div class="collapsibleContent_i85q"><blockquote>
<p>在REST Client中，对于GET请求，通常不会使用请求体（body），因为HTTP规范中GET请求的body是被忽略的。但是，如果你确实需要在GET请求中发送body（尽管不推荐），或者你指的是在POST/PUT等请求中从文件中读取body，以下是两种情况的解决方案：</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="情况1在postput等请求中从文件读取body">情况1：在POST/PUT等请求中从文件读取body<a href="#情况1在postput等请求中从文件读取body" class="hash-link" aria-label="情况1：在POST/PUT等请求中从文件读取body的直接链接" title="情况1：在POST/PUT等请求中从文件读取body的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./request-body.json</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="情况2在get请求中发送body不推荐但技术上可行">情况2：在GET请求中发送body（不推荐，但技术上可行）<a href="#情况2在get请求中发送body不推荐但技术上可行" class="hash-link" aria-label="情况2：在GET请求中发送body（不推荐，但技术上可行）的直接链接" title="情况2：在GET请求中发送body（不推荐，但技术上可行）的直接链接" translate="no">​</a></h3>
<p>虽然不推荐，但REST Client支持在GET请求中设置body。同样可以从文件读取：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./get-request-body.json</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="更常见的情况从文件读取内容作为请求的一部分如post">更常见的情况：从文件读取内容作为请求的一部分（如POST）<a href="#更常见的情况从文件读取内容作为请求的一部分如post" class="hash-link" aria-label="更常见的情况：从文件读取内容作为请求的一部分（如POST）的直接链接" title="更常见的情况：从文件读取内容作为请求的一部分（如POST）的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 发送一个JSON body，从文件读取</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/items</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./data/item.json</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="动态生成请求体使用脚本">动态生成请求体（使用脚本）<a href="#动态生成请求体使用脚本" class="hash-link" aria-label="动态生成请求体（使用脚本）的直接链接" title="动态生成请求体（使用脚本）的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 动态生成请求体</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/items</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 从文件读取内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const rawData = fs.readFileSync(&#x27;template.json&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const template = JSON.parse(rawData);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 修改模板数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template.timestamp = new Date().toISOString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 设置请求体（必须返回字符串）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request.body = JSON.stringify(template);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="注意事项-1">注意事项：<a href="#注意事项-1" class="hash-link" aria-label="注意事项：的直接链接" title="注意事项：的直接链接" translate="no">​</a></h3>
<ol>
<li class=""><strong>文件路径</strong>：<!-- -->
<ul>
<li class="">使用相对路径时，基于当前工作目录（通常是项目根目录）</li>
<li class="">使用绝对路径确保稳定性：<code>&lt; /absolute/path/to/file.json</code></li>
</ul>
</li>
<li class=""><strong>文件编码</strong>：<!-- -->
<ul>
<li class="">默认按UTF-8读取</li>
<li class="">二进制文件需特殊处理</li>
</ul>
</li>
<li class=""><strong>动态内容</strong>：<!-- -->
<ul>
<li class="">使用脚本生成请求体时，必须将<code>request.body</code>设置为字符串</li>
<li class="">注意设置正确的<code>Content-Type</code></li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="示例结合查询参数和文件body">示例：结合查询参数和文件body<a href="#示例结合查询参数和文件body" class="hash-link" aria-label="示例：结合查询参数和文件body的直接链接" title="示例：结合查询参数和文件body的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 同时使用查询参数和文件body</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/items?category={{category}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./item.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">###</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置全局变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@category = electronics</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="示例从多个文件合并数据">示例：从多个文件合并数据<a href="#示例从多个文件合并数据" class="hash-link" aria-label="示例：从多个文件合并数据的直接链接" title="示例：从多个文件合并数据的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/merge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const file1 = JSON.parse(fs.readFileSync(&#x27;part1.json&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const file2 = JSON.parse(fs.readFileSync(&#x27;part2.json&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const merged = { ...file1, ...file2 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request.body = JSON.stringify(merged);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="常见问题解决-1">常见问题解决：<a href="#常见问题解决-1" class="hash-link" aria-label="常见问题解决：的直接链接" title="常见问题解决：的直接链接" translate="no">​</a></h3>
<ol start="4">
<li class=""><strong>文件找不到</strong>：<!-- -->
<ul>
<li class="">检查文件路径是否正确</li>
<li class="">使用<code>path</code>模块构建绝对路径：<!-- -->
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;data&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;file.json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
<li class=""><strong>大文件处理</strong>：<!-- -->
<ul>
<li class="">避免使用脚本读取大文件（可能超时）</li>
<li class="">直接使用<code>&lt;</code>操作符加载文件内容</li>
</ul>
</li>
<li class=""><strong>非JSON文件</strong>：<!-- -->
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/upload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: text/plain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./large-text-file.txt</span><br></span></code></pre></div></div>
</li>
</ol>
<p>这些方法覆盖了从文件读取内容作为请求体的主要场景，无论是静态读取还是动态生成都能满足需求。</p>
</blockquote></div></div></details>
<h1>在 REST Client 中从文件读取请求体(Body)</h1>
<p>在 REST Client 插件中，您可以从文件中读取内容作为请求体(body)。以下是详细实现方法：</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-基本文件读取作为请求体">1. 基本文件读取作为请求体<a href="#1-基本文件读取作为请求体" class="hash-link" aria-label="1. 基本文件读取作为请求体的直接链接" title="1. 基本文件读取作为请求体的直接链接" translate="no">​</a></h2>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 创建新用户 (从文件读取JSON body)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./request-body.json</span><br></span></code></pre></div></div>
<p>文件路径说明：</p>
<ul>
<li class=""><code>./request-body.json</code> 是相对于当前 <code>.http</code> 文件的路径</li>
<li class="">支持绝对路径：<code>&lt; /Users/name/project/data/request.json</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-动态选择文件路径">2. 动态选择文件路径<a href="#2-动态选择文件路径" class="hash-link" aria-label="2. 动态选择文件路径的直接链接" title="2. 动态选择文件路径的直接链接" translate="no">​</a></h2>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 更新用户信息 (动态文件路径)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PUT https://api.example.com/users/{{userId}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 根据用户ID选择不同的请求体文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const userId = request.headers[&quot;userId&quot;] || &quot;default&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const filePath = `./user-data/${userId}.json`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 设置请求体为文件内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request.body = require(&#x27;fs&#x27;).readFileSync(filePath, &#x27;utf-8&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-处理非json格式的文件">3. 处理非JSON格式的文件<a href="#3-处理非json格式的文件" class="hash-link" aria-label="3. 处理非JSON格式的文件的直接链接" title="3. 处理非JSON格式的文件的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="上传文本文件">上传文本文件<a href="#上传文本文件" class="hash-link" aria-label="上传文本文件的直接链接" title="上传文本文件的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 上传文本文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/upload-text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: text/plain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./document.txt</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="上传xml文件">上传XML文件<a href="#上传xml文件" class="hash-link" aria-label="上传XML文件的直接链接" title="上传XML文件的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 上传XML数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/xml-endpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./data.xml</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-结合查询参数和文件体">4. 结合查询参数和文件体<a href="#4-结合查询参数和文件体" class="hash-link" aria-label="4. 结合查询参数和文件体的直接链接" title="4. 结合查询参数和文件体的直接链接" translate="no">​</a></h2>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 搜索并提交额外数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET https://api.example.com/search?query={{searchTerm}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./search-params.json</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-多部分表单上传文件字段">5. 多部分表单上传（文件+字段）<a href="#5-多部分表单上传文件字段" class="hash-link" aria-label="5. 多部分表单上传（文件+字段）的直接链接" title="5. 多部分表单上传（文件+字段）的直接链接" translate="no">​</a></h2>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 上传用户头像</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/users/{{userId}}/avatar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------WebKitFormBoundary7MA4YWxkTrZu0gW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Disposition: form-data; name=&quot;metadata&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./avatar-metadata.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------WebKitFormBoundary7MA4YWxkTrZu0gW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Disposition: form-data; name=&quot;image&quot;; filename=&quot;avatar.jpg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: image/jpeg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./images/avatar.jpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------WebKitFormBoundary7MA4YWxkTrZu0gW--</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-文件预处理动态修改内容">6. 文件预处理（动态修改内容）<a href="#6-文件预处理动态修改内容" class="hash-link" aria-label="6. 文件预处理（动态修改内容）的直接链接" title="6. 文件预处理（动态修改内容）的直接链接" translate="no">​</a></h2>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 提交预处理后的文件内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 读取原始文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fs = require(&#x27;fs&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const rawContent = fs.readFileSync(&#x27;./raw-data.json&#x27;, &#x27;utf-8&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 预处理数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const data = JSON.parse(rawContent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data.timestamp = new Date().toISOString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data.processed = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 设置处理后的请求体</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request.body = JSON.stringify(data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-二进制文件上传">7. 二进制文件上传<a href="#7-二进制文件上传" class="hash-link" aria-label="7. 二进制文件上传的直接链接" title="7. 二进制文件上传的直接链接" translate="no">​</a></h2>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 上传图片</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/upload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: image/png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./images/screenshot.png</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="文件路径处理技巧">文件路径处理技巧<a href="#文件路径处理技巧" class="hash-link" aria-label="文件路径处理技巧的直接链接" title="文件路径处理技巧的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="相对路径解决方案">相对路径解决方案<a href="#相对路径解决方案" class="hash-link" aria-label="相对路径解决方案的直接链接" title="相对路径解决方案的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 使用相对路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const path = require(&#x27;path&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 获取相对于当前脚本的路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const filePath = path.resolve(__dirname, &#x27;../data/request.json&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request.body = require(&#x27;fs&#x27;).readFileSync(filePath, &#x27;utf-8&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="按环境选择不同文件">按环境选择不同文件<a href="#按环境选择不同文件" class="hash-link" aria-label="按环境选择不同文件的直接链接" title="按环境选择不同文件的直接链接" translate="no">​</a></h3>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### 根据环境选择配置文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const env = process.env.NODE_ENV || &#x27;development&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const filePath = `./config-${env}.json`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request.body = require(&#x27;fs&#x27;).readFileSync(filePath, &#x27;utf-8&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="常见问题解决-2">常见问题解决<a href="#常见问题解决-2" class="hash-link" aria-label="常见问题解决的直接链接" title="常见问题解决的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-文件找不到错误">1. 文件找不到错误<a href="#1-文件找不到错误" class="hash-link" aria-label="1. 文件找不到错误的直接链接" title="1. 文件找不到错误的直接链接" translate="no">​</a></h3>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">文件读取错误: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">error</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">message</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 使用默认内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;配置文件缺失&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-大文件处理">2. 大文件处理<a href="#2-大文件处理" class="hash-link" aria-label="2. 大文件处理的直接链接" title="2. 大文件处理的直接链接" translate="no">​</a></h3>
<p>对于大文件，建议直接使用 <code>&lt;</code> 操作符而不是脚本读取：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST https://api.example.com/big-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Content-Type: application/octet-stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; ./large-file.bin</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-特殊字符处理">3. 特殊字符处理<a href="#3-特殊字符处理" class="hash-link" aria-label="3. 特殊字符处理的直接链接" title="3. 特殊字符处理的直接链接" translate="no">​</a></h3>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 处理文件中的特殊字符</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> content </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex escape" style="color:#36acaa">\n</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-flags" style="color:#36acaa">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>这些方法让您能够灵活地从文件中读取内容作为请求体，无论是简单的JSON数据、文本内容还是二进制文件，都能轻松处理。</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#user" class="table-of-contents__link toc-highlight">USER</a></li><li><a href="#assistant" class="table-of-contents__link toc-highlight">ASSISTANT</a></li><li><a href="#1-基本保存操作" class="table-of-contents__link toc-highlight">1. <strong>基本保存操作</strong></a></li><li><a href="#2-提取部分字段并保存" class="table-of-contents__link toc-highlight">2. <strong>提取部分字段并保存</strong></a></li><li><a href="#3-高级示例动态文件名" class="table-of-contents__link toc-highlight">3. <strong>高级示例：动态文件名</strong></a></li><li><a href="#4-循环保存多个字段" class="table-of-contents__link toc-highlight">4. <strong>循环保存多个字段</strong></a></li><li><a href="#关键点说明" class="table-of-contents__link toc-highlight">关键点说明：</a></li><li><a href="#常见问题解决" class="table-of-contents__link toc-highlight">常见问题解决：</a></li><li><a href="#user-1" class="table-of-contents__link toc-highlight">USER</a></li><li><a href="#assistant-1" class="table-of-contents__link toc-highlight">ASSISTANT</a></li><li><a href="#示例场景" class="table-of-contents__link toc-highlight">示例场景</a></li><li><a href="#步骤" class="table-of-contents__link toc-highlight">步骤</a></li><li><a href="#说明" class="table-of-contents__link toc-highlight">说明</a></li><li><a href="#多个请求共享变量" class="table-of-contents__link toc-highlight">多个请求共享变量</a></li><li><a href="#注意" class="table-of-contents__link toc-highlight">注意</a></li><li><a href="#其他格式文件示例如文本" class="table-of-contents__link toc-highlight">其他格式文件示例（如文本）</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li><li><a href="#方法一使用脚本从文件中读取并设置查询参数" class="table-of-contents__link toc-highlight">方法一：使用脚本从文件中读取并设置查询参数</a></li><li><a href="#方法二直接读取文件并构造查询字符串" class="table-of-contents__link toc-highlight">方法二：直接读取文件并构造查询字符串</a></li><li><a href="#方法三使用前置请求准备参数" class="table-of-contents__link toc-highlight">方法三：使用前置请求准备参数</a></li><li><a href="#文件示例-configjson" class="table-of-contents__link toc-highlight">文件示例 (config.json)</a></li><li><a href="#关键点说明-1" class="table-of-contents__link toc-highlight">关键点说明：</a></li><li><a href="#动态文件名示例" class="table-of-contents__link toc-highlight">动态文件名示例：</a></li><li><a href="#注意事项" class="table-of-contents__link toc-highlight">注意事项：</a></li><li><a href="#user-2" class="table-of-contents__link toc-highlight">USER</a></li><li><a href="#assistant-2" class="table-of-contents__link toc-highlight">ASSISTANT</a></li><li><a href="#情况1在postput等请求中从文件读取body" class="table-of-contents__link toc-highlight">情况1：在POST/PUT等请求中从文件读取body</a></li><li><a href="#情况2在get请求中发送body不推荐但技术上可行" class="table-of-contents__link toc-highlight">情况2：在GET请求中发送body（不推荐，但技术上可行）</a></li><li><a href="#更常见的情况从文件读取内容作为请求的一部分如post" class="table-of-contents__link toc-highlight">更常见的情况：从文件读取内容作为请求的一部分（如POST）</a></li><li><a href="#动态生成请求体使用脚本" class="table-of-contents__link toc-highlight">动态生成请求体（使用脚本）</a></li><li><a href="#注意事项-1" class="table-of-contents__link toc-highlight">注意事项：</a></li><li><a href="#示例结合查询参数和文件body" class="table-of-contents__link toc-highlight">示例：结合查询参数和文件body</a></li><li><a href="#示例从多个文件合并数据" class="table-of-contents__link toc-highlight">示例：从多个文件合并数据</a></li><li><a href="#常见问题解决-1" class="table-of-contents__link toc-highlight">常见问题解决：</a></li><li><a href="#1-基本文件读取作为请求体" class="table-of-contents__link toc-highlight">1. 基本文件读取作为请求体</a></li><li><a href="#2-动态选择文件路径" class="table-of-contents__link toc-highlight">2. 动态选择文件路径</a></li><li><a href="#3-处理非json格式的文件" class="table-of-contents__link toc-highlight">3. 处理非JSON格式的文件</a><ul><li><a href="#上传文本文件" class="table-of-contents__link toc-highlight">上传文本文件</a></li><li><a href="#上传xml文件" class="table-of-contents__link toc-highlight">上传XML文件</a></li></ul></li><li><a href="#4-结合查询参数和文件体" class="table-of-contents__link toc-highlight">4. 结合查询参数和文件体</a></li><li><a href="#5-多部分表单上传文件字段" class="table-of-contents__link toc-highlight">5. 多部分表单上传（文件+字段）</a></li><li><a href="#6-文件预处理动态修改内容" class="table-of-contents__link toc-highlight">6. 文件预处理（动态修改内容）</a></li><li><a href="#7-二进制文件上传" class="table-of-contents__link toc-highlight">7. 二进制文件上传</a></li><li><a href="#文件路径处理技巧" class="table-of-contents__link toc-highlight">文件路径处理技巧</a><ul><li><a href="#相对路径解决方案" class="table-of-contents__link toc-highlight">相对路径解决方案</a></li><li><a href="#按环境选择不同文件" class="table-of-contents__link toc-highlight">按环境选择不同文件</a></li></ul></li><li><a href="#常见问题解决-2" class="table-of-contents__link toc-highlight">常见问题解决</a><ul><li><a href="#1-文件找不到错误" class="table-of-contents__link toc-highlight">1. 文件找不到错误</a></li><li><a href="#2-大文件处理" class="table-of-contents__link toc-highlight">2. 大文件处理</a></li><li><a href="#3-特殊字符处理" class="table-of-contents__link toc-highlight">3. 特殊字符处理</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Fan's life, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>