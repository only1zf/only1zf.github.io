"use strict";(globalThis.webpackChunkpub=globalThis.webpackChunkpub||[]).push([[7765],{28453:(n,e,o)=>{o.d(e,{R:()=>d,x:()=>l});var s=o(96540);const c={},i=s.createContext(c);function d(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:d(n.components),s.createElement(i.Provider,{value:e},n.children)}},71443:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"excerpts/tech/\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528","title":"\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528","description":"Author: Tachyon","source":"@site/docs/excerpts/tech/\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528.md","sourceDirName":"excerpts/tech","slug":"/excerpts/tech/\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528","permalink":"/docs/excerpts/tech/\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"aliases":["\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528"],"authors":["Tachyon"],"date":"2019-02-16T00:00:00.000Z","source":"https://tachyondevel.medium.com/%E6%BC%AB%E8%B0%88%E5%90%84%E7%A7%8D%E9%BB%91%E7%A7%91%E6%8A%80%E5%BC%8F-dns-%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-62c50e58cbd0"},"sidebar":"excerptsSidebar","previous":{"title":"How to Get Startup Ideas","permalink":"/docs/excerpts/tech/startup-ideas"},"next":{"title":"\u82df\u6d3b\u7684\u4e2d\u5e74\u4eba","permalink":"/docs/excerpts/\u82df\u6d3b\u7684\u4e2d\u5e74\u4eba"}}');var c=o(74848),i=o(28453);const d={aliases:["\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528"],authors:["Tachyon"],date:new Date("2019-02-16T00:00:00.000Z"),source:"https://tachyondevel.medium.com/%E6%BC%AB%E8%B0%88%E5%90%84%E7%A7%8D%E9%BB%91%E7%A7%91%E6%8A%80%E5%BC%8F-dns-%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-62c50e58cbd0"},l="\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528",r={},t=[{value:"\u684c\u9762\u7aef\u73af\u5883",id:"\u684c\u9762\u7aef\u73af\u5883",level:3},{value:"V2Ray \u5185\u7f6e DNS",id:"v2ray-\u5185\u7f6e-dns",level:3},{value:"V2Ray DNS Outbound",id:"v2ray-dns-outbound",level:3},{value:"tun2socks",id:"tun2socks",level:3},{value:"\u79fb\u52a8\u7aef\u73af\u5883",id:"\u79fb\u52a8\u7aef\u73af\u5883",level:3},{value:"Fake DNS",id:"fake-dns",level:3},{value:"DNS Fallback",id:"dns-fallback",level:3}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components},{Head:o}=e;return o||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f-dns-\u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528",children:"\u6f2b\u8c08\u5404\u79cd\u9ed1\u79d1\u6280\u5f0f DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u7684\u5e94\u7528"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"Author:"})," Tachyon"]}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"Original link:"})," ",(0,c.jsx)(e.a,{href:"https://tachyondevel.medium.com/%E6%BC%AB%E8%B0%88%E5%90%84%E7%A7%8D%E9%BB%91%E7%A7%91%E6%8A%80%E5%BC%8F-dns-%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-62c50e58cbd0",children:"https://tachyondevel.medium.com/%E6%BC%AB%E8%B0%88%E5%90%84%E7%A7%8D%E9%BB%91%E7%A7%91%E6%8A%80%E5%BC%8F-dns-%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-62c50e58cbd0"})]}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"Note:"})," All rights belong to the original author. This post includes brief excerpts for commentary and review. Please read the full article at the source."]}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"Published"})," on 2019-02-15T20:42:00Z"]}),"\n",(0,c.jsx)(e.hr,{}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.a,{href:"https://tachyondevel.medium.com/sitemap/sitemap.xml",children:"Sitemap"})}),"\n",(0,c.jsxs)(e.p,{children:["\u8fd9\u7bc7\u6587\u7ae0\u76ee\u7684\u662f\u4ee5\u975e\u6280\u672f\u6027\u4f8b\u4e3e\u65b9\u5f0f\uff0c\u8c08\u4e00\u8c08\u5404\u79cd DNS \u6280\u672f\u5728\u4ee3\u7406\u73af\u5883\u4e2d\u5982\u4f55\u5de5\u4f5c\uff0c\u4e3b\u8981\u96c6\u4e2d\u5728\u5bf9 V2Ray \u7684\u4f7f\u7528\u4e0a\uff0c\u56e0\u4e3a\u6700\u8fd1 V2Ray \u53d1\u5e03\u4e86\u4e00\u4e2a DNS \u76f8\u5173\u7684\u529f\u80fd\uff1a ",(0,c.jsx)(e.a,{href:"https://steemit.com/cn/@v2ray/dns",children:"https://steemit.com/cn/@v2ray/dns"})," \uff0c\u5176\u7528\u6cd5\u5f88\u591a\uff0c\u53ef\u4ee5\u89e3\u51b3\u5f88\u591a\u95ee\u9898\uff0c\u4f46\u5982\u679c\u4e0d\u7406\u89e3\u5176\u5de5\u4f5c\u65b9\u5f0f\uff0c\u5c31\u5f88\u96be\u505a\u51fa\u5408\u7406\u7684\u914d\u7f6e\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u672c\u6587\u6240\u8ba8\u8bba\u7684\u4e5f\u4e0d\u5355\u7eaf\u662f DNS\uff0c\u8fd8\u6d89\u53ca V2Ray \u7684\u90e8\u5206\u5de5\u4f5c\u539f\u7406\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u8ba8\u8bba\u662f\u4f9d\u8d56\u4e8e\u4f7f\u7528 V2Ray \u6765\u5bf9 DNS \u6d41\u91cf\u505a\u5404\u79cd\u5904\u7406\u7684\u3002\u6240\u4ee5\u4e5f\u5e0c\u671b\u8bfb\u8005\u770b\u61c2\u4e86\u6587\u7ae0\u4e2d\u7684\u4f8b\u5b50\u540e\uff0c\u53ef\u4ee5\u4e3e\u4e00\u53cd\u4e09\uff0c\u4ece\u800c\u66f4\u597d\u7406\u89e3 V2Ray \u7684\u6574\u4f53\u5de5\u4f5c\u539f\u7406\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u672c\u6587\u4e3e\u4f8b\u8303\u56f4\u9884\u8ba1\u4f1a\u5305\u62ec\u684c\u9762\u7cfb\u7edf\uff08Windows, macOS\uff09\u3001\u79fb\u52a8\u7aef\uff08iOS, Android\uff09\u3001\u666e\u901a\u6d4f\u89c8\u5668\u4ee3\u7406\uff08\u7cfb\u7edf\u4ee3\u7406\uff09\u3001\u5168\u5c40\u4ee3\u7406\uff08tun2socks\uff09\uff0c\u6216\u8bb8\u8fd8\u4f1a\u804a\u804a\u8def\u7531\u5668\u4e0a\u7684\u900f\u660e\u4ee3\u7406\u3002"}),"\n",(0,c.jsx)(e.h3,{id:"\u684c\u9762\u7aef\u73af\u5883",children:"\u684c\u9762\u7aef\u73af\u5883"}),"\n",(0,c.jsx)(e.p,{children:"\u5148\u4ece\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\u8bf4\u8d77\uff0c\u4e86\u89e3\u4e0b\u5927\u6982\u7684\u8fc7\u7a0b\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u9996\u5148\u8bf4\u4e00\u4e0b\u4e0d\u5f00\u4efb\u4f55\u4ee3\u7406\u8f6f\u4ef6\uff0c\u4e0d\u505a\u4efb\u4f55\u4ee3\u7406\u8bbe\u7f6e\u65f6\uff0cDNS \u7684\u5de5\u4f5c\u65b9\u5f0f\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'S11. \u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 www.bilibili.com\uff0c\u6572\u4e0b Enter\n2. \u6d4f\u89c8\u5668\u53d1\u8d77\u9488\u5bf9 "www.bilibili.com" \u8fd9\u4e2a\u57df\u540d\u7684 DNS \u8bf7\u6c42\n3. \u5047\u8bbe\u7cfb\u7edf DNS \u8bbe\u7f6e\u4e86 114.114.114.114\n4. \u627f\u8f7d DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\u5c31\u4f1a\u4ece\u4f60\u672c\u673a\u76f4\u63a5\u53d1\u5230 114.114.114.114\n5. 114.114.114.114 \u63a5\u6536\u4e86\u8fd9\u4e9b UDP \u6d41\u91cf\n6. 114.114.114.114 \u4ece\u8fd9\u4e9b UDP \u6d41\u91cf\u4e2d\u89e3\u6790\u51fa\u8bf7\u6c42\u7684\u57df\u540d "www.bilibili.com"\n7. 114.114.114.114 \u5c1d\u8bd5\u4ece\u81ea\u5df1\u7f13\u5b58\u91cc\u627e\u7ed3\u679c\uff0c\u6709\u7684\u8bdd\u8fd4\u56de\u7ed3\u679c\n8. 114.114.114.114 \u5982\u679c\u6ca1\u7f13\u5b58\uff0c\u4f1a\u5411\u5176\u5b83 DNS \u670d\u52a1\u5668\u8981\u7ed3\u679c\uff0c\u62ff\u5230\u540e\u8fd4\u56de\n9. \u6d4f\u89c8\u5668\u6536\u5230 114.114.114.114 \u8fd4\u56de\u7684\u7ed3\u679c\n10. \u6d4f\u89c8\u5668\u5f00\u59cb\u771f\u6b63\u5730\u5bf9 Bilibili \u7684\u670d\u52a1\u5668\u53d1\u8d77 HTTP/HTTPS \u8fde\u63a5\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u4e0b\u9762\u5047\u8bbe\u5728\u7cfb\u7edf\u6216\u6d4f\u89c8\u5668\u4e2d\u8bbe\u7f6e\u4e86 SOCKS 5\uff08\u6ce8\u610f\u662f SOCKS 5\uff0c\u7248\u672c 5\uff09\u4ee3\u7406\u670d\u52a1\u5668\u5730\u5740\u4e3a\uff1a127.0.0.1:1086\u3002"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"Windows \u7cfb\u7edf\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u7cfb\u7edf\u4ee3\u7406\u91cc\u76f4\u63a5\u8bbe\u7f6e SOCKS \u4ee3\u7406\u6709\u53ef\u80fd\u7528\u7684\u4e0d\u662f SOCKS 5\uff0c\u800c\u662f SOCKS 4\uff0cSOCKS 4 \u662f\u4e0d\u652f\u6301\u8fdc\u7a0b DNS \u89e3\u6790\u7684\uff0c\u60f3\u8981\u8bbe\u7f6e SOCKS 5 \u7684\u8bdd\u8981\u7528 PAC \u6587\u4ef6\uff0cPAC \u6587\u4ef6\u5185\u5bb9\u53ef\u4ee5\u8fd9\u4e48\u5199\uff1a"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'function FindProxyForURL(url, host) {\nreturn "SOCKS5 127.0.0.1:1086; SOCKS 127.0.0.1:1086";\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u7136\u540e\u5728\u672c\u5730\u5f00\u542f\u4e00\u4e2a V2Ray\uff0c\u914d\u7f6e\u5927\u6982\u5982\u4e0b\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'C1{\n    "dns": {\n        "servers": [\n            "223.5.5.5",\n            "8.8.8.8"\n        ]\n    },\n    "outbounds": [\n        {\n            "protocol": "freedom",\n            "settings": {}\n        }\n    ],\n    "inbounds": [\n        {\n            "domainOverride": [\n                "http",\n                "tls"\n            ],\n            "port": 1086,\n            "listen": "127.0.0.1",\n            "protocol": "socks",\n            "settings": {\n                "auth": "noauth",\n                "udp": true,\n                "ip": "127.0.0.1"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u5728\u8fd9\u4e2a\u57fa\u7840\u4e0a\u5bf9\u6bd4\u4e0a\u9762\uff08S1\uff09\u4e0d\u8bbe\u7f6e\u4ee3\u7406\u7684\u60c5\u51b5\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'S21. \u6d4f\u89c8\u5668\u5730\u5740\u680f\u8f93\u5165 www.bilibili.com\uff0c\u6572\u4e0b Enter2. \u6d4f\u89c8\u5668\u53d1\u73b0\u8bbe\u7f6e\u4e86 SOCKS \u4ee3\u7406\uff0c\u56e0\u4e3a SOCKS \u4ee3\u7406\u53ef\u4ee5\u628a\u57df\u540d\u4f20\u7ed9\u670d\u52a1\u5668\u5904\u7406\n3. \u6240\u4ee5\u6d4f\u89c8\u5668\u4e0d\u9700\u8981\u505a DNS \u8bf7\u6c42\uff0c\u76f4\u63a5\u628a\u57df\u540d\u653e\u8fdb SOCKS \u8bf7\u6c42\u4e2d\u53d1\u7ed9\u4ee3\u7406\u670d\u52a1\u5668\n4. \u6211\u4eec\u7684\u4ee3\u7406\u670d\u52a1\u5668(V2Ray) 127.0.0.1:1086 \u6536\u5230\u4e86\u8fd9\u4e2a SOCKS \u4ee3\u7406\u8bf7\u6c42\n5. \u4ee3\u7406\u670d\u52a1\u5668(V2Ray) \u4ece SOCKS \u8bf7\u6c42\u4e2d\u89e3\u6790\u51fa "www.bilibili.com" \u8fd9\u4e2a\u57df\u540d\n6. \u4ee3\u7406\u670d\u52a1\u5668(V2Ray) \u8981\u4ee3\u7406\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u4f46\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a Freedom outbound\n7. \u4e8e\u662f\u5c31\u7528 Freedom outbound \u5411 www.bilibili.com \u53d1\u8d77 TCP \u8fde\u63a5\n8. Freedom outbound \u8981\u5411\u4e00\u4e2a\u57df\u540d\u53d1 TCP \u8fde\u63a5\uff0c\u5f97\u5148\u89e3\u6790\u57df\u540d9. \u627f\u8f7d DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\u5c31\u4f1a\u4ece\u4f60\u672c\u673a\u76f4\u63a5\u53d1\u5230 114.114.114.114\n9. 114.114.114.114 \u63a5\u6536\u4e86\u8fd9\u4e9b UDP \u6d41\u91cf\n10. 114.114.114.114 \u4ece\u8fd9\u4e9b UDP \u6d41\u91cf\u4e2d\u89e3\u6790\u51fa\u8bf7\u6c42\u7684\u57df\u540d "www.bilibili.com"\n11. 114.114.114.114 \u5c1d\u8bd5\u4ece\u81ea\u5df1\u7f13\u5b58\u91cc\u627e\u7ed3\u679c\uff0c\u6709\u7684\u8bdd\u8fd4\u56de\u7ed3\u679c\n12. 114.114.114.114 \u5982\u679c\u6ca1\u7f13\u5b58\uff0c\u4f1a\u5411\u5176\u5b83 DNS \u670d\u52a1\u5668\u8981\u7ed3\u679c\uff0c\u62ff\u5230\u540e\u8fd4\u56de14. \u7a0b\u5e8f(V2Ray)\u6536\u5230 114.114.114.114 \u8fd4\u56de\u7684\u7ed3\u679c\n13. \u7a0b\u5e8f(V2Ray)\u5f00\u59cb\u771f\u6b63\u5730\u5bf9 Bilibili \u7684\u670d\u52a1\u5668\u53d1\u8d77 TCP \u8fde\u63a5\n14. \u8fde\u63a5\u4e00\u65e6\u5efa\u7acb\uff0c\u4ee3\u7406\u670d\u52a1\u5668(V2Ray) \u5c31\u53ef\u4ee5\u771f\u6b63\u5730\u4ee3\u7406\u5ba2\u6237\u7aef(\u6d4f\u89c8\u5668)\u7684\u8bf7\u6c42\u6d41\u91cf\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u4e0a\u9762\uff08S2\uff09\u8bbe\u7f6e\u4e0d\u6d89\u53ca\u4efb\u4f55\u8fdc\u7a0b\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u7531\u672c\u5730\u7684 V2Ray \u5145\u5f53\u4ee3\u4e86\u7406\u670d\u52a1\u5668\uff0c\u4ee3\u7406\u7684 ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com/",children:"www.bilibili.com"})," \u8bf7\u6c42\u662f\u91c7\u7528\u76f4\u8fde\u65b9\u5f0f\uff0c\u4e5f\u4e00\u6837\u6709\u5411 114.114.114.114 \u53d1\u51fa\u4e86 DNS \u8bf7\u6c42\u3002\u4f46\u53ef\u4ee5\u770b\u5230\u5728\u540e\u4e00\u4e2a\u4f8b\u5b50\u53d1\u8d77 DNS \u8bf7\u6c42\u7684\u662f V2Ray\uff08\u800c\u4e0d\u662f\u6d4f\u89c8\u5668\uff09\uff0c\u800c\u4ece Bilibili \u7684\u670d\u52a1\u5668\u770b\u6765\uff0c\u8ddf\u5b83\u8fde\u63a5\u662f V2Ray\uff08\u800c\u4e0d\u662f\u6d4f\u89c8\u5668\uff09\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u52a0\u4e86\u8fd9\u4e48\u4e00\u5c42\u4ee3\u7406\uff0c\u770b\u8d77\u6765\u4ec0\u4e48\u90fd\u6ca1\u53d1\u751f\uff0c\u53ea\u662f\u6362\u4e86\u89d2\u8272\uff0c\u5176\u5b9e\u4e0d\u7136\uff0c\u89d2\u8272\u8fd9\u4e48\u4e00\u6362\uff0c\u53ef\u505a\u7684\u4e8b\u60c5\u5c31\u76f8\u5f53\u591a\u4e86\u3002\u62ff DNS \u6765\u8bf4\uff0c\u539f\u6765\u662f\u6d4f\u89c8\u5668\u53d1\u8d77\u7684 DNS \u8bf7\u6c42\uff0c\u6211\u4eec\u6ca1\u529e\u6cd5\u63a7\u5236\u6d4f\u89c8\u5668\u600e\u4e48\u53bb\u53d1\u8fd9\u4e2a DNS \u8bf7\u6c42\uff08\u4f60\u4e0d\u53ef\u80fd\u53bb\u6539\u6d4f\u89c8\u5668\u7684\u6e90\u4ee3\u7801\u81ea\u5df1\u7f16\u8bd1\u4e00\u4e2a\u6765\u7528\u5427\uff1f\uff09\uff0c\u4f46\u6362\u6210\u7531 V2Ray \u6765\u53d1\u8fd9\u4e2a DNS \u8bf7\u6c42\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u505a\u5f88\u591a\u4e8b\u60c5\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["\u6bd4\u5982\u7a0d\u5fae\u6539\u4e00\u4e0b\u4e0a\u9762\uff08C1\uff09\u7684\u914d\u7f6e\uff0c\u5728 Freedom oubound \u4e2d\u52a0\u5165 ",(0,c.jsx)(e.code,{children:'"domainStrategy": "UseIP"'})," \uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'C2{\n    "dns": {\n        "servers": [\n            "223.5.5.5",\n            "8.8.8.8"\n        ]\n    },\n    "outbounds": [\n        {\n            "protocol": "freedom",\n            "settings": {\n                "domainStrategy": "UseIP"\n            }\n        }\n    ],\n    "inbounds": [\n        {\n            "domainOverride": [\n                "http",\n                "tls"\n            ],\n            "port": 1086,\n            "listen": "127.0.0.1",\n            "protocol": "socks",\n            "settings": {\n                "auth": "noauth",\n                "udp": true,\n                "ip": "127.0.0.1"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.a,{href:"https://v2ray.com/chapter_02/protocols/freedom.html",children:"V2Ray \u6587\u6863"})," \u4e2d\u5bf9 ",(0,c.jsx)(e.code,{children:"domainStrategy"})," \u7684\u8bf4\u660e\u662f\u8fd9\u6837\u7684\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'\u5728\u76ee\u6807\u5730\u5740\u4e3a\u57df\u540d\u65f6\uff0cFreedom \u53ef\u4ee5\u76f4\u63a5\u5411\u6b64\u57df\u540d\u53d1\u51fa\u8fde\u63a5\uff08"AsIs"\uff09\uff0c\u6216\u8005\u5c06\u57df\u540d\u89e3\u6790\u4e3a IP \u4e4b\u540e\u518d\u5efa\u7acb\u8fde\u63a5\uff08"UseIP"\u3001"UseIPv4"\u3001"UseIPv6"\uff09\u3002\u89e3\u6790 IP \u7684\u6b65\u9aa4\u4f1a\u4f7f\u7528 V2Ray \u5185\u5efa\u7684 DNS\u3002\u9ed8\u8ba4\u503c\u4e3a"AsIs"\u3002\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u539f\u672c\u9ed8\u8ba4\u4e3a ",(0,c.jsx)(e.code,{children:"AsIs"})," \u7684\u8bdd\uff0c\u76f4\u63a5\u5411\u57df\u540d\u53d1\u51fa\u8fde\u63a5\u5c31\u662f\u8bf4\u4f1a\u7528\u7cfb\u7edf DNS \u6765\u505a DNS \u89e3\u6790\uff0c\u4f46\u5982\u679c\u6211\u4eec\u8bbe\u7f6e\u4e3a ",(0,c.jsx)(e.code,{children:"UseIP"})," \uff0cS2 \u4e2d\u7684\u6b65\u9aa4\u5c31\u4f1a\u53d8\u6210\u8fd9\u6837\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'S3...8. Freedom outbound \u8981\u5411\u4e00\u4e2a\u57df\u540d\u53d1 TCP \u8fde\u63a5\uff0c\u5f97\u5148\u89e3\u6790\u57df\u540d* Freedom outbound \u7528\u4e86 UseIP \u7b56\u7565\uff0c\u6240\u4ee5\u4f7f\u7528\u5185\u7f6e DNS \u6765\u89e3\u6790\u57df\u540d\n* \u5185\u7f6e DNS \u6309\u987a\u5e8f\u7b2c\u4e00\u4e2a\u662f 223.5.5.5\n* \u5185\u7f6e DNS \u8bf7\u6c42\u4f1a\u6309\u8def\u7531\u89c4\u5219\u8d70\uff0c\u56e0\u4e3a\u6ca1\u6709\u4efb\u4f55\u89c4\u5219\uff0c\u4e14\u53ea\u6709\u4e00\u4e2a Freedom outbound\n* \u5185\u7f6e DNS \u53d1\u5230 223.5.5.5 \u7684\u8bf7\u6c42\u8d70 Freedom outbound9. \u627f\u8f7d DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\u5c31\u4f1a\u4ece\u4f60\u672c\u673a\u76f4\u63a5\u53d1\u5230 223.5.5.5\n10. 223.5.5.5 \u63a5\u6536\u4e86\u8fd9\u4e9b UDP \u6d41\u91cf\n11. 223.5.5.5 \u4ece\u8fd9\u4e9b UDP \u6d41\u91cf\u4e2d\u89e3\u6790\u51fa\u8bf7\u6c42\u7684\u57df\u540d "www.bilibili.com"\n12. 223.5.5.5 \u5c1d\u8bd5\u4ece\u81ea\u5df1\u7f13\u5b58\u91cc\u627e\u7ed3\u679c\uff0c\u6709\u7684\u8bdd\u8fd4\u56de\u7ed3\u679c\n13. 223.5.5.5 \u5982\u679c\u6ca1\u7f13\u5b58\uff0c\u4f1a\u5411\u5176\u5b83 DNS \u670d\u52a1\u5668\u8981\u7ed3\u679c\uff0c\u62ff\u5230\u540e\u8fd4\u56de14. \u7a0b\u5e8f(V2Ray)\u6536\u5230 223.5.5.5 \u8fd4\u56de\u7684\u7ed3\u679c...\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u6539\u4e86\u4e00\u4e2a ",(0,c.jsx)(e.code,{children:"domainStrategy"})," \u53c2\u6570\uff0c\u5c31\u76f8\u5f53\u4e8e\u8986\u76d6\u4e86\u7cfb\u7edf\u7684 DNS\uff0c\u672c\u6765\u5e94\u8be5\u8d70 114.114.114.114\uff08\u7cfb\u7edf DNS\uff09\u7684 DNS \u8bf7\u6c42\u73b0\u5728\u8d70 223.5.5.5\uff08V2Ray \u5185\u7f6e DNS\uff09\u4e86\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u4e0a\u9762\u4f8b\u5b50\u90fd\u5f88\u7b80\u5355\uff0c\u5e76\u6ca1\u4ec0\u4e48\u5b9e\u9645\u7528\u5904\uff0c\u4f46\u4e86\u89e3\u8fd9\u4e9b\u53ef\u4ee5\u65b9\u4fbf\u7406\u89e3\u540e\u7eed\u5404\u79cd\u82b1\u5f0f\u73a9\u6cd5\u3002\u53e6\u5916\u867d\u8bf4\u7b80\u5355\uff0c\u4f46\u4e5f\u5df2\u7ecf\u5305\u62ec\u4e86\u51e0\u4e2a\u9700\u8981\u5173\u6ce8\u7684\u70b9\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u6bd4\u5982\u5728 S2 \u4e2d\u662f\u8fd9\u4e48\u5199\u7684\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"\u6d4f\u89c8\u5668\u53d1\u73b0\u8bbe\u7f6e\u4e86 SOCKS \u4ee3\u7406\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u91cc\u5c31\u5f97\u6ce8\u610f\u4e86\uff0c\u6211\u4eec\u8bbe\u7f6e\u7684 SOCKS \u4ee3\u7406\u9700\u8981\u6d4f\u89c8\u5668\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u53d1\u73b0\u4e86\uff0c\u6d4f\u89c8\u5668\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u624d\u4f1a\u53bb\u4f7f\u7528\u5b83\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u6ca1\u53d1\u73b0\u6211\u4eec\u8bbe\u7f6e\u7684\u7cfb\u7edf\u4ee3\u7406\u5462\uff1f\u6216\u8005\u6d4f\u89c8\u5668\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u65e0\u89c6\u4e86\u6211\u4eec\u8bbe\u7f6e\u7684\u7cfb\u7edf\u4ee3\u7406\uff0c\u6309\u6b63\u5e38\u7684\u6d41\u7a0b\u53bb\u505a\u8bf7\u6c42\u5462\uff1f"}),"\n",(0,c.jsxs)(e.p,{children:["\u8fd9\u91cc\u7684\u5173\u952e\u70b9\u662f\uff0c\u4e00\u822c\u684c\u9762\u64cd\u4f5c\u7cfb\u7edf\uff08Windows, macOS\uff09\u4e2d\u7684\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e\u53ea\u662f\u4e00\u4e2a ",(0,c.jsx)(e.code,{children:"\u53ef\u9009"})," \u7684\u8fde\u63a5\u65b9\u5f0f\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u5982\u679c\u8bbe\u7f6e\u4e86\u7cfb\u7edf\u4ee3\u7406\uff0c\u4e00\u822c\u7684\u6d4f\u89c8\u5668\u7a0b\u5e8f\uff08Chrome, Firefox, Safari\uff09\u9ed8\u8ba4\u90fd\u4f1a\u53d1\u73b0\u5e76\u9075\u4ece\u8fd9\u4e2a\u8bbe\u7f6e\u3002\u5176\u5b83\u7684\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u5c31\u4e0d\u4e00\u5b9a\u4f1a\u9075\u4ece\u8fd9\u4e2a\u8bbe\u7f6e\u4e86\uff0c\u6bd4\u5982 QQ \u8fd9\u6837\u7684\u7a0b\u5e8f\uff0c\u5b83\u9ed8\u8ba4\u5e94\u8be5\u662f\u4e0d\u4f1a\u9075\u4ece\u8fd9\u4e2a\u8bbe\u7f6e\u7684\uff08\u5b83\u6709\u81ea\u5df1\u7684\u8bbe\u7f6e\u9879\uff09\uff0c\u518d\u6bd4\u5982\u6253\u5f00\u547d\u4ee4\u884c\uff0c\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"curl https://www.bilibili.com\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"curl"})," \u505a\u7684\u8fd9\u4e2a\u8bf7\u6c42\u65f6\u662f\u4e0d\u4f1a\u4f7f\u7528\u7cfb\u7edf\u4ee3\u7406\u7684\u3002\u5982\u679c\u60f3\u8ba9 ",(0,c.jsx)(e.code,{children:"curl"})," \u4f7f\u7528\u4ee3\u7406\uff0c\u53ef\u4ee5\u8fd9\u4e48\u8bbe\u7f6e\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c ",(0,c.jsx)(e.code,{children:"curl"})," \u4f1a\u8bfb\u53d6\u8fd9\u4e2a\u53d8\u91cf\uff0c\u4ece\u800c\u5f97\u77e5\u4ee3\u7406\u7684\u5b58\u5728\u5e76\u4f7f\u7528\u5b83\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"http_proxy=127.0.0.1:1086 curl https://www.bilibili.com\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u518d\u6bd4\u5982\u4e0a\u9762\u573a\u666f\u4e2d\u591a\u6b21\u63d0\u5230 DNS \u8bf7\u6c42\u76f8\u5173\u5185\u5bb9\u65f6\uff0c\u7528\u4e86 ",(0,c.jsx)(e.code,{children:"DNS \u8bf7\u6c42"})," \uff0c ",(0,c.jsx)(e.code,{children:"\u627f\u8f7d DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf"})," \u7b49\u591a\u79cd\u8bf4\u6cd5\uff0c\u5b83\u4eec\u5176\u5b9e\u90fd\u662f\u6307\u540c\u4e00\u4e2a\u4e1c\u897f\uff0c\u53ea\u662f\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4e2d\u7528\u4e86\u4e0d\u540c\u7684\u8bf4\u6cd5\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u7b80\u5355\u6765\u8bf4\uff0c\u4ece\u6211\u4eec\u673a\u5668\u53d1\u51fa\u53bb\u7684\u4e00\u4e2a DNS \u8bf7\u6c42\u4f1a\u662f\u8fd9\u4e2a\u6837\u5b50\u7684\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"F1+------+-------+--------------------------+\n| IP \u5934| UDP \u5934 | DNS \u5934 \u53ca \u5176 \u8bf7 \u6c42 \u5185 \u5bb9  |\n+------+-------+--------------------------+\u91cd\u70b9\uff1a\u4e00\u822c\u8fd9\u79cd DNS \u8bf7\u6c42\u90fd\u662f\u7eaf\u6587\u672c\uff08\u6211\u4eec\u4e5f\u53ea\u8ba8\u8bba\u8fd9\u79cd DNS\uff09\uff0c\u5b83\u4eec\u6240\u6d41\u7ecf\u7684\u5404\u79cd\u8bbe\u5907\uff0c\u5404\u79cd\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u770b\u5230\uff0c\u53ef\u4ee5\u4fee\u6539\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u53d1\u51fa\u7684\u8bf7\u6c42\u53ef\u4ee5\u4fee\u6539\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u53ef\u4ee5\u4fee\u6539\uff0c\u751a\u81f3\u4fee\u6539\u8fc7\u540e\u6beb\u65e0\u75d5\u8ff9\uff0c\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u53d1\u51fa\u7684\u8bf7\u6c42\uff0cDNS \u670d\u52a1\u5668\u6ca1\u529e\u6cd5\u77e5\u9053\u5b83\u662f\u5426\u5728\u4e2d\u95f4\u94fe\u8def\u88ab\u4fee\u6539\u8fc7\uff0c\u5bf9\u4e8e\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u5e94\u7528\u7a0b\u5e8f\u4e5f\u6ca1\u529e\u6cd5\u77e5\u9053\u5b83\u662f\u5426\u5728\u4e2d\u95f4\u94fe\u8def\u88ab\u4fee\u6539\u8fc7\u3002\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u8fd9\u662f\u4e00\u4e2a IP \u5305\uff0c\u4ece\u67d0\u79cd\u89d2\u5ea6\u6765\u770b\u53ef\u4ee5\u8bf4\u5b83\u662f\u4e00\u4e2a\u627f\u8f7d\u4e86 UDP \u6d41\u91cf\u7684 IP \u5305\uff0c\u5176\u4e2d IP \u5934\u4e2d\u5305\u542b\u4e86\u6e90\u5730\u5740\uff08\u672c\u673a IP\uff09\u548c\u76ee\u7684\u5730\u5740\uff08114.114.114.114\uff09\uff0cUDP \u5934\u4e2d\u5305\u542b\u4e86\u6e90\u7aef\u53e3\uff08\u968f\u673a\uff09\u548c\u76ee\u7684\u7aef\u53e3\uff0853\uff09\uff0cDNS \u5934\u53ca\u5176\u8bf7\u6c42\u5185\u5bb9\u4e2d\u5305\u542b\u4e86\u8bf7\u6c42\u8981\u89e3\u6790\u7684\u57df\u540d\uff08",(0,c.jsx)(e.a,{href:"http://www.bilibili.com%EF%BC%89%EF%BC%8C%E8%A6%81%E8%A7%A3%E6%9E%90%E7%9A%84",children:"www.bilibili.com\uff09\uff0c\u8981\u89e3\u6790\u7684"})," DNS \u7c7b\u578b\uff08A/AAAA\uff09\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u6240\u8c13\u5728\u4e0d\u540c\u4e0a\u4e0b\u6587\u7528\u4e0d\u540c\u7684\u8bf4\u6cd5\uff0c\u4e00\u822c\u5c31\u662f\u6307\u5728\u4e0d\u540c\u7684\u65f6\u5019\u6211\u4eec\u5173\u6ce8\u4e0d\u540c\u4fe1\u606f\uff0c\u5f53\u8868\u8fbe\u6d41\u91cf\u4ece\u672c\u673a\u53d1\u9001\u5230 114.114.114.114\uff0c\u6211\u4eec\u5173\u6ce8\u7684\u662f IP \u5730\u5740\u548c\u7aef\u53e3\uff0c\u8fd9\u65f6\u6211\u4eec\u8bf4\u627f\u8f7d DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\uff08\u56e0\u4e3a IP \u5730\u5740\u548c\u7aef\u53e3\u4fe1\u606f\u5728 IP \u5934 \u548c UDP \u5934\u4e2d\uff09\uff0c\u5f53\u6211\u4eec\u53ea\u5173\u6ce8\u6240\u8981\u89e3\u6790\u7684\u57df\u540d\u201c",(0,c.jsx)(e.a,{href:"http://www.bilibili.com%E2%80%9D%E6%97%B6%EF%BC%8C%E4%BC%9A%E8%AF%B4",children:"www.bilibili.com\u201d\u65f6\uff0c\u4f1a\u8bf4"})," DNS \u8bf7\u6c42\uff08\u56e0\u4e3a\u8fd9\u4e2a\u4fe1\u606f\u5728 DNS \u5934\u53ca\u5176\u8bf7\u6c42\u5185\u5bb9\u4e2d\uff09\u3002\u66f4\u591a\u7684\u65f6\u5019\u662f\u6df7\u7528\uff0c\u5728\u8fd9\u65b9\u9762\u4e0d\u4f1a\u592a\u4e25\u8c28\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u77e5\u9053\u54ea\u4e2a\u4fe1\u606f\u5305\u542b\u5728\u54ea\u4e00\u90e8\u5206\u7684\u6570\u636e\u4e2d\uff0c\u4f1a\u5bf9\u6211\u4eec\u7406\u89e3\u5404\u79cd DNS \u6280\u672f\u7684\u5de5\u4f5c\u65b9\u5f0f\u6709\u5f88\u5927\u5e2e\u52a9\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u4e0b\u9762\u4e3e\u4e00\u4e2a\u5b9e\u9645\u4f7f\u7528\u4e2d\u53ef\u80fd\u7528\u4e0a\u7684\u4f8b\u5b50\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'C3{\n    "dns": {\n        "servers": [\n            "8.8.8.8",\n            "localhost"\n        ]\n    },\n    "outbounds": [\n        {\n            "protocol": "vmess",\n            "settings": {\n                "vnext": [\n                    {\n                        "users": [\n                            {\n                                "id": "xxx-x-x-x-xx-x-x-x-x"\n                            }\n                        ],\n                        "address": "1.2.3.4",\n                        "port": 10086\n                    }\n                ]\n            },\n            "streamSettings": {\n                "network": "tcp"\n            },\n            "tag": "proxy"\n        },\n        {\n            "tag": "direct",\n            "protocol": "freedom",\n            "settings": {}\n        }\n    ],\n    "inbounds": [\n        {\n            "domainOverride": [\n                "http",\n                "tls"\n            ],\n            "port": 1086,\n            "listen": "127.0.0.1",\n            "protocol": "socks",\n            "settings": {\n                "auth": "noauth",\n                "udp": true,\n                "ip": "127.0.0.1"\n            }\n        }\n    ],\n    "routing": {\n        "domainStrategy": "IPIfNonMatch",\n        "rules": [\n            {\n                "type": "field",\n                "ip": [\n                    "8.8.8.8"\n                ],\n                "outboundTag": "proxy"\n            },\n            {\n                "type": "field",\n                "domain": [\n                    "geosite:cn"\n                ],\n                "outboundTag": "direct"\n            }\n        ]\n    }\n}\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u7b80\u5355\u63cf\u8ff0\u4e0b\u4e0a\u9762\u914d\u7f6e\uff1a\u5185\u7f6e DNS \u7528 8.8.8.8 \u505a\u9996\u9009\u670d\u52a1\u5668\uff0clocalhost \u4f5c\u5907\u7528\uff0c\u8def\u7531\u4e2d\u9996\u5148\u6765\u4e00\u6761\u89c4\u5219\u8ba9 8.8.8.8 \u7684\u6d41\u91cf\u4e00\u5b9a\u8d70 proxy\uff0c\u5339\u914d\u4e86 geosite",":cn"," \u4e2d\u7684\u57df\u540d\u7684\u8bf7\u6c42\u8d70 direct\uff0c\u5982\u679c\u6ca1\u5339\u914d\u4efb\u4f55\u89c4\u5219\uff0c\u5219\u8d70\u4e3b outbound\uff0c\u4e5f\u5373 outbounds \u4e2d\u7684\u7b2c\u4e00\u4e2a\uff0c\u4e5f\u5373 proxy\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u540c\u6837\u8bbe\u7f6e\u7cfb\u7edf\u4ee3\u7406\u81f3 V2Ray \u7684 SOCKS inbound 127.0.0.1:1086\uff0c\u518d\u6765\u8003\u8651\u6d4f\u89c8\u5668\u505a\u8bf7\u6c42\u7684\u8fc7\u7a0b\uff0c\u7ecf\u8fc7\u4e0a\u9762\u51e0\u4e2a\u4f8b\u5b50\uff0c\u53ef\u4ee5\u770b\u5230\u5f88\u591a\u6b65\u9aa4\u5176\u5b9e\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u540e\u7eed\u4f8b\u5b50\u4e2d\u4f1a\u7b80\u5316\u4e00\u4e9b\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'S41. \u5047\u8bbe\u6d4f\u89c8\u5668\u8bf7\u6c42 https://www.bilibili.com\n2. \u6d4f\u89c8\u5668\u53d1 SOCKS \u8bf7\u6c42\u5230 V2Ray\n3. \u8bf7\u6c42\u6765\u5230 V2Ray \u7684 inbound\uff0c\u518d\u5230\u8def\u7531\u8fc7\u7a0b\n4. \u5f88\u660e\u663e www.bilibili.com \u8fd9\u4e2a\u57df\u540d\u5305\u62ec\u5728 geosite:cn \u4e2d\uff0c\u8d70 direct\n5. Freedom outbound (direct) \u5bf9 www.bilibili.com \u53d1\u8d77 TCP \u8fde\u63a5\n6. Freedom outbound \u89e3\u6790\u57df\u540d\uff0c\u56e0\u4e3a\u8fd9\u6b21\u6ca1\u6709\u7528 UseIP\uff0c\u7528\u7684\u662f\u7cfb\u7edf DNS\n7. \u76f4\u63a5\u53d1 DNS \u8bf7\u6c42\u5230 114.114.114.114\n8. \u5f97\u5230\u7ed3\u679c\u540e\u53ef\u4ee5\u8ddf Bilibili \u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\uff0c\u51c6\u5907\u4ee3\u7406\u6d4f\u89c8\u5668\u53d1\u8fc7\u6765\u7684 HTTPS \u6d41\u91cf\nS51. \u518d\u5047\u8bbe\u6d4f\u89c8\u5668\u8bf7\u6c42 https://www.google.com\n9. \u6d4f\u89c8\u5668\u53d1 SOCKS \u8bf7\u6c42\u5230 V2Ray\n10. \u8bf7\u6c42\u6765\u5230 V2Ray \u7684 inbound\uff0c\u518d\u5230\u8def\u7531\u8fc7\u7a0b4. www.google.com \u4e0d\u5728 gesoite:cn\uff0c\u4e5f\u6ca1\u5339\u914d\u4efb\u4f55\u89c4\u5219\uff0c\u672c\u6765\u5e94\u8be5\u76f4\u63a5\u8d70\u4e3b outbound: proxy\uff0c\u4f46\u56e0\u4e3a\u6211\u4eec\u7528\u4e86 IPIfNonMatch \u7b56\u7565\uff0cV2Ray \u4f1a\u53bb\u5c1d\u8bd5\u4f7f\u7528\u5185\u7f6e\u7684 DNS \u628a www.google.com \u7684 IP \u89e3\u6790\u51fa\u67655. V2Ray \u4f7f\u7528\u5185\u7f6e DNS \u5411 8.8.8.8 \u53d1\u8d77\u9488\u5bf9 www.google.com \u7684 DNS \u8bf7\u6c42\uff0c\u8fd9\u4e2a\u8bf7\u6c42\u7684\u6d41\u91cf\u5c06\u4f1a\u662f UDP \u6d41\u91cf6. \u5185\u7f6e DNS \u53d1\u51fa\u7684 DNS \u8bf7\u6c42\u4f1a\u6309\u8def\u7531\u89c4\u5219\u8d70\uff0c\u56e0\u4e3a 8.8.8.8 \u5339\u914d\u4e86\u8def\u7531\u4e2d\u7684\u7b2c\u4e00\u6761\u89c4\u5219\uff0c\u8fd9\u4e2a DNS \u8bf7\u6c42\u7684\u6d41\u91cf\u4f1a\u8d70 proxy7. proxy \u5411\u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u53d1\u8d77 TCP \u4ee3\u7406\u8fde\u63a5\uff08\u56e0\u4e3a "network": "tcp"\uff098. \u5efa\u7acb\u8d77 TCP \u8fde\u63a5\u540e\uff0cproxy \u5411\u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u53d1\u51fa udp:8.8.8.8:53 \u8fd9\u6837\u7684\u4ee3\u7406\u8bf7\u6c429. \u8fdc\u7aef\u670d\u52a1\u5668\u8868\u793a\u63a5\u53d7\u8fd9\u4e2a\u4ee3\u7406\u8bf7\u6c42\u540e\uff0cproxy \u7528\u5efa\u7acb\u597d\u7684 TCP \u8fde\u63a5\u5411\u8fdc\u7aef\u670d\u52a1\u5668\u53d1\u9001\u627f\u8f7d\u4e86 DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\uff08\u6240\u4ee5 V2Ray/VMess \u76ee\u524d\u662f UDP over TCP\uff0910. \u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u63a5\u6536\u5230\u8fd9\u4e9b\u627f\u8f7d DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\u540e\uff0c\u53d1\u9001\u7ed9\u6700\u7ec8\u76ee\u6807 udp:8.8.8.8:5311. 8.8.8.8 \u8fd4\u56de\u7ed9\u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668 DNS \u7ed3\u679c\u540e\uff0c\u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u539f\u8def\u8fd4\u56de\u81f3\u672c\u5730 V2Ray \u7684\u5185\u7f6e DNS\uff0c\u81f3\u6b64\uff0c\u4ece\u6b65\u9aa4 5 ~ 11\uff0c\u6574\u4e2a DNS \u89e3\u6790\u8fc7\u7a0b\u5b8c\u6210\u300212. \u63a5\u4e0a\u9762\u6b65\u9aa4 4\uff0cV2Ray \u5f97\u5230 www.google.com \u7684 IP\uff0c\u518d\u8fdb\u884c\u4e00\u6b21\u89c4\u5219\u5339\u914d\uff0c\u5f88\u660e\u663e\u8def\u7531\u89c4\u5219\u4e2d\u6ca1\u6709\u76f8\u5173\u7684 IP \u89c4\u5219\uff0c\u6240\u4ee5\u8fd8\u662f\u6ca1\u5339\u914d\u5230\u4efb\u4f55\u89c4\u5219\uff0c\u6700\u7ec8\u8fd8\u662f\u8d70\u4e86\u4e3b outbound: proxy13. proxy \u5411\u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u53d1\u8d77 TCP \u4ee3\u7406\u8fde\u63a5\uff08\u56e0\u4e3a "network": "tcp"\uff0914. \u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u56e0\u4e3a proxy \u4e2d\u6240\u7528\u7684 VMess \u534f\u8bae\u53ef\u4ee5\u50cf SOCKS \u90a3\u6837\u628a\u57df\u540d\u4ea4\u7ed9\u4ee3\u7406\u670d\u52a1\u5668\u5904\u7406\uff0c\u6240\u4ee5\u672c\u5730\u7684 V2Ray \u4e0d\u9700\u8981\u81ea\u5df1\u89e3\u6790 www.google.com\uff0c\u628a\u57df\u540d\u653e\u8fdb VMess \u534f\u8bae\u7684\u53c2\u6570\u4e2d\u4e00\u5e76\u4ea4\u7ed9\u4ee3\u7406\u670d\u52a1\u5668\u6765\u5904\u740615. \u8fdc\u7aef\u7684 V2Ray \u4ee3\u7406\u670d\u52a1\u5668\u6536\u5230\u8fd9\u4e2a\u4ee3\u7406\u8bf7\u6c42\u540e\uff0c\u5b83\u53ef\u80fd\u81ea\u5df1\u505a\u57df\u540d\u89e3\u6790\uff0c\u4e5f\u53ef\u80fd\u7ee7\u7eed\u4ea4\u7ed9\u4e0b\u4e00\u7ea7\u4ee3\u7406\u5904\u7406\uff0c\u53ea\u8981\u540e\u7eed\u4ee3\u7406\u90fd\u652f\u6301\u7c7b SOCKS \u7684\u57df\u540d\u5904\u7406\u65b9\u5f0f\uff0c\u8fd9\u4e2a DNS \u8bf7\u6c42\u5c31\u53ef\u4ee5\u4e00\u63a8\u518d\u63a8\uff0c\u63a8\u7ed9\u6700\u540e\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\u5668\u6765\u5904\u7406\uff0c\u8fd9\u4e2a\u8d85\u51fa\u672c\u6587\u8303\u56f4\u4e0d\u4f5c\u8ba8\u8bba\uff0c\u53cd\u6b63\u8fd9\u4e2a\u57df\u540d\u4e0d\u9700\u8981\u6211\u4eec\u672c\u5730\u53bb\u89e3\u679016. \u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u6700\u540e\u4f1a\u53d1\u51fa\u9488\u5bf9 www.google.com \u7684 DNS \u8bf7\u6c42\uff08\u81f3\u4e8e\u7a76\u7adf\u662f\u5982\u4f55\u53d1\uff0c\u53d1\u5230\u54ea\u4e2a DNS \u670d\u52a1\u5668\uff0c\u6211\u4eec\u4e0d\u4e00\u5b9a\u80fd\u77e5\u9053\uff0c\u4e5f\u4e0d\u5173\u5fc3\u8fd9\u4e2a\uff0917. \u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u5f97\u5230 DNS \u7ed3\u679c\u540e\uff0c\u53ef\u4ee5\u771f\u6b63\u5730\u5411 Google \u7684\u670d\u52a1\u5668\u5efa\u7acb TCP \u8fde\u63a518. \u8fdc\u7aef\u7684 V2Ray \u505a\u597d\u51c6\u5907\u540e\u544a\u8bc9\u672c\u5730 V2Ray \u8fde\u63a5\u5efa\u7acb\u597d\u4e86\uff0c\u53ef\u4ee5\u4f20\u6570\u636e\u4e8619. \u672c\u5730 V2Ray \u5c31\u544a\u8bc9\u6d4f\u89c8\u5668\u8fde\u63a5\u597d\u4e86\uff0c\u53ef\u4ee5\u4f20\u6570\u636e\u4e86\uff0c\u6d4f\u89c8\u5668\u5c31\u53ef\u4ee5\u628a HTTPS \u6d41\u91cf\u987a\u7740\u8fd9\u4e2a\u4ee3\u7406\u94fe\u53d1\u9001\u81f3 Google \u7684\u670d\u52a1\u5668\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u4e0a\u9762 S5 \u4e2d\uff0c\u6b65\u9aa4 5 ~ 11 \u505a\u4e86\u6b21 DNS \u8bf7\u6c42\uff0c\u91c7\u7528\u4ee3\u7406\u8f6c\u53d1 DNS \u8bf7\u6c42\u6d41\u91cf\u7684\u65b9\u5f0f\uff0c\u800c\u5728\u6b65\u9aa4 14 \u4e2d\uff0c\u53c8\u8bf4\u53ef\u4ee5\u4e0d\u89e3\u6790\u57df\u540d\uff0c\u4ea4\u7ed9\u8fdc\u7aef\u670d\u52a1\u5668\u6765\u89e3\u6790\uff0c\u8fd9\u4e24\u8005\u5176\u5b9e\u5e76\u4e0d\u51b2\u7a81\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u524d\u8005\u7684\u5904\u7406\u65b9\u5f0f\u5c31\u662f\u5b9e\u5b9e\u5728\u5728\u7684 UDP \u6d41\u91cf\u4ee3\u7406\u800c\u5df2\uff0c\u540e\u8005\u4e00\u822c\u53eb\u4f5c\u8fdc\u7a0b DNS \u89e3\u6790\u3002\u7528\u4e86 ",(0,c.jsx)(e.code,{children:"IPIfNonMatch"})," \uff0c\u5bf9\u57df\u540d\u505a\u4e00\u6b21 DNS \u89e3\u6790\u8981\u7ecf\u8fc7 5 ~ 11 \u8fd9\u4e48\u591a\u6b65\u9aa4\uff0c\u770b\u8d77\u6765\u6548\u7387\u5f88\u6162\uff0c\u4f46\u5982\u679c\u4ee3\u7406\u670d\u52a1\u5668\u4e0d\u6162\u7684\u8bdd\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e00\u822c\u662f\u5f88\u5feb\u7684\uff0c\u6700\u91cd\u8981\u7684\u662f V2Ray \u5185\u7f6e DNS \u5bf9 DNS \u7ed3\u679c\u6709\u4e00\u4e2a\u7f13\u5b58\uff0c\u6240\u4ee5\u5e76\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u53bb\u505a DNS \u8bf7\u6c42\u3002\u4e0d\u7ba1\u600e\u4e48\u8bf4\uff0c\u6bd5\u7adf\u8fd8\u662f\u505a\u4e86\u989d\u5916\u7684\u4e8b\u60c5\uff0c\u800c\u4e14\u6709\u53ef\u80fd\u6d89\u53ca\u5230\u4e00\u4e2a UDP over TCP \u7684\u4ee3\u7406\u8bf7\u6c42\uff0c\u7684\u786e\u4f1a\u76f8\u5bf9\u5730\u6162\u70b9\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u53e6\u5916\u8981\u63d0\u5230\u4e00\u70b9\u662f\uff0c\u4e0a\u9762\u7684\u914d\u7f6e\u4e2d\u90fd\u5728\u672c\u5730 SOCKS inbound \u4e2d\u7528\u4e86\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'"domainOverride": [\n   "http",\n   "tls"\n]\n'})}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\u5728\u65b0\u7684\u914d\u7f6e\u683c\u5f0f\u4e2d\u8fd9\u4e2a\u6d41\u91cf\u55c5\u63a2\u7684\u914d\u7f6e\u6709\u4e86\u65b0\u7684\u5199\u6cd5\uff0c\u540e\u7eed\u4f1a\u7528\u8fd9\u4e2a\u5199\u6cd5\uff1a"}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.code,{children:'"sniffing": {    "enabled": true,    "destOverride": ["http", "tls"]   }'})}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u4e2a\u662f\u5bf9\u6d41\u91cf\u8fdb\u884c\u57df\u540d\u55c5\u63a2\uff0c\u5982\u679c\u914d\u7f6e\u4e86\uff0cV2Ray \u5c31\u4f1a\u505a\u55c5\u63a2\u64cd\u4f5c\uff0c\u4f46\u4e0a\u9762\u7684\u4f8b\u5b50\u6ca1\u6709\u628a\u8fd9\u4e2a\u64cd\u4f5c\u8fc7\u7a0b\u5217\u51fa\u6765\uff0c\u662f\u56e0\u4e3a\u76ee\u524d\u6211\u4eec\u7684\u573a\u666f\u662f\u684c\u9762\u7cfb\u7edf + \u6d4f\u89c8\u5668\uff0c\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u8fd9\u4e2a\u55c5\u63a2\u529f\u80fd\u4e0d\u4f1a\u8d77\u989d\u5916\u7684\u4f5c\u7528\uff0c\u6d4f\u89c8\u5668\u4f1a\u628a\u57df\u540d\u4ea4\u7ed9 V2Ray\uff0c\u4e0d\u9700\u8981 V2Ray \u53bb\u55c5\u63a2\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u5982\u679c\u770b\u660e\u767d\u4e0a\u9762\u7684\u4e0a\u9762\u51e0\u4e2a\u4e3e\u4f8b\uff0c\u76f8\u4fe1\u8bfb\u8005\u5df2\u7ecf\u5bf9 V2Ray \u7684\u5de5\u4f5c\u65b9\u5f0f\u6709\u4e86\u5927\u81f4\u7684\u4e86\u89e3\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6d41\u91cf\u4ece inbound \u8fdb\u5165\u5230 V2Ray\uff0c\u518d\u8fdb\u5165\u5230\u8def\u7531\u5339\u914d\u8fc7\u7a0b\uff0c\u627e\u5230\u5339\u914d\u5230\u7684 outbound\uff0c\u7136\u540e\u6d41\u91cf\u5c31\u7ed9\u5230\u8fd9\u4e2a outbound \u5904\u7406\u3002V2Ray \u867d\u7136\u6709\u591a\u79cd inbound\uff0c\u591a\u79cd outbound\uff0c\u4ee5\u53ca\u5f88\u7075\u6d3b\u7684\u8def\u7531\u5339\u914d\u89c4\u5219\uff0c\u6709\u65f6\u5019\u4f1a\u8ba9\u4eba\u773c\u82b1\u7f2d\u4e71\uff0c\u4f46\u8fd9\u6761\u6d41\u91cf\u6d41\u7ecf\u7684\u8def\u7ebf\u662f\u9ed8\u8ba4\u7684\uff0c\u6ca1\u6709\u7279\u6b8a\u914d\u7f6e\uff0c\u6d41\u91cf\u90fd\u4f1a\u6309\u8fd9\u4e2a\u987a\u5e8f\u5728 V2Ray \u5185\u90e8\u4f20\u9012\u3002"}),"\n",(0,c.jsx)(e.h3,{id:"v2ray-\u5185\u7f6e-dns",children:"V2Ray \u5185\u7f6e DNS"}),"\n",(0,c.jsx)(e.p,{children:"\u800c V2Ray \u7684\u5185\u7f6e DNS \u5176\u5b9e\u4e5f\u53ea\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u529f\u80fd\u6a21\u5757\uff0c\u5b83\u4e3a V2Ray \u5185\u90e8\u5176\u5b83\u6a21\u5757\u63d0\u4f9b DNS \u529f\u80fd\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u57df\u540d\u4f5c\u4e3a\u8f93\u5165\uff0c\u8fd4\u56de\u4e00\u4e2a IP \u5217\u8868\u4f5c\u4e3a\u8f93\u51fa\u3002"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\u76f4\u63a5\u62ff V2Ray \u91cc\u9762\u4ee3\u7801\u51fa\u6765\u770b\uff0c\u5185\u7f6e DNS \u529f\u80fd\u5bf9\u5176\u5b83\u6a21\u5757\u63d0\u4f9b\u7684\u63a5\u53e3\u662f\u8fd9\u6837\u7684\uff0c\u8868\u793a\u8f93\u5165\u53c2\u6570\u662f\u57df\u540d\uff0c\u8f93\u51fa\u662f IP \u5217\u8868\u4ee5\u53ca\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u5982\u679c\u6b63\u5e38\u8fd4\u56de\uff0c\u9519\u8bef\u4fe1\u606f\u4f1a\u662f\u7a7a\u7684\uff0cIP \u5217\u8868\u53ef\u4ee5\u540c\u65f6\u6709 IPv4 \u548c IPv6 \u5730\u5740\uff1a"}),"\n",(0,c.jsx)(e.p,{children:"LookupIP(domain string) ([]net.IP, error)"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u5c31\u662f\u4ece\u5176\u5b83 V2Ray \u6a21\u5757\u7684\u89d2\u5ea6\u6765\u770b V2Ray \u5185\u7f6e DNS \u529f\u80fd\uff0c\u81f3\u4e8e\u5185\u7f6e DNS \u5185\u90e8\u662f\u5426\u505a\u57df\u540d\u5206\u6d41\uff0c\u5185\u90e8\u5411\u54ea\u4e2a DNS \u670d\u52a1\u5668\u53d1\u51fa DNS \u8bf7\u6c42\uff0c\u7528\u4f55\u79cd\u65b9\u5f0f\u53d1\u8fd9\u4e2a DNS \u8bf7\u6c42\uff0c\u5176\u5b83\u6a21\u5757\u662f\u7ba1\u4e0d\u7740\u7684\uff0c\u4e5f\u5b8c\u5168\u4e0d\u77e5\u60c5\u7684\u3002\u8fd9\u6837\u770b\u5185\u7f6e DNS \u529f\u80fd\u5c31\u5f88\u7b80\u5355\uff0c\u5176\u5b83\u6a21\u5757\uff0c\u6bd4\u5982\u4e0a\u9762\u63d0\u5230\u8def\u7531\u6a21\u5757\u7528\u5185\u7f6e DNS \u6765\u89e3\u6790\u57df\u540d\u540e\u7528 IP \u518d\u6b21\u8fdb\u884c\u5339\u914d\uff08\u6216\u8005\u540e\u9762\u4f1a\u63d0\u5230\u7684 DNS outbound \u6a21\u5757\uff09\uff0c\u5176\u5b9e\u5c31\u662f\u8fd9\u6837\u8c03\u7528\u4e86\u5185\u7f6e DNS\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"\u8def\u7531\u6a21\u5757\uff1a\u6211\u6709\u4e00\u4e2a\u57df\u540d\uff0c\u7ed9\u4f60\uff08\u5185\u7f6e DNS \u6a21\u5757\uff09\uff0c\u5e2e\u6211\u67e5\u67e5\u5b83\u7684 IP \u5730\u5740\u662f\u4ec0\u4e48\u5185\u7f6e DNS \u6a21\u5757\u6309\u7167\u81ea\u5df1\u7684\u914d\u7f6e\uff0c\u505a\u4e86\u5404\u79cd\u5904\u7406\uff0c\u6700\u7ec8\u5f97\u5230 IP \u5730\u5740\u5185\u7f6e DNS \u6a21\u5757\uff1a\u8fd9\u5c31\u662f\u5b83\uff08\u57df\u540d\uff09\u7684 IP\uff0c\u7ed9\u4f60\uff08\u8def\u7531\u6a21\u5757\uff09\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u4ece\u5176\u5b83\u6a21\u5757\uff08\u5916\u90e8\uff09\u770b V2Ray \u7684\u5185\u7f6e DNS \u5c31\u8fd9\u4e48\u7b80\u5355\u7684\uff0c\u90a3\u4ece\u5185\u90e8\u770b\u5b83\u5462\uff1f\u4ece\u5185\u90e8\u770b\u4e5f\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u53ea\u8981\u5206\u6e05\u695a\u5916\u90e8\u548c\u5185\u90e8\u5404\u81ea\u8d1f\u8d23\u7684\u4e8b\u60c5\uff0c\u5404\u81ea\u6240\u80fd\u5f97\u5230\u7684\u4fe1\u606f\uff0c\u5c31\u5f88\u597d\u7406\u89e3\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["\u6bd4\u5982\u5185\u7f6e DNS \u652f\u6301 hosts\uff0c\u8fd9\u4e2a\u529f\u80fd\u662f\u600e\u4e48\u505a\u7684\u5462\uff1f\u6309\u4e0a\u9762\u7684\u63cf\u8ff0\uff0c\u5916\u90e8\u53ea\u4f20\u5165\u4e00\u4e2a\u57df\u540d\uff0c\u5176\u5b83\u7684\u7ba1\u4e0d\u4e86\uff0c\u90a3\u5185\u7f6e DNS \u91cc\u9762\u968f\u4fbf\u8fd4\u56de\u4ec0\u4e48\u6837\u7684\u7ed3\u679c\uff0c\u5916\u90e8\u90fd\u4e0d\u80fd\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u6bd4\u5982\u8def\u7531\u6a21\u5757\u8981\u67e5 ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com/",children:"www.google.com"})," \u7684 IP\uff0c\u4f20\u5b83\u7ed9\u5185\u7f6e DNS\uff0c\u4f46\u5982\u679c\u5185\u7f6e DNS \u6839\u672c\u5c31\u4e0d\u53d1\u4efb\u4f55 DNS \u8bf7\u6c42\uff0c\u4e0d\u505a\u4efb\u4f55\u989d\u5916\u5904\u7406\uff0c\u76f4\u63a5\u5c31\u8fd4\u56de\u4e00\u4e2a 127.0.0.1 \u7ed9\u8def\u7531\u6a21\u5757\uff0c\u8fd9\u65f6\u8def\u7531\u6a21\u5757\u4e5f\u4e0d\u5f97\u6709\u4efb\u4f55\u5f02\u8bae\uff0c\u5c31\u7b97\u5f88\u663e\u793a 127.0.0.1 \u4e0d\u53ef\u80fd\u662f ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com/",children:"www.google.com"})," \u771f\u6b63\u7684 IP \u5730\u5740\u3002\u90a3\u6837\u5728\u5185\u7f6e DNS \u4e2d\u914d\u7f6e\u4e00\u4e2a ",(0,c.jsx)(e.code,{children:"\u57df\u540d -> IP"})," \u7684\u5217\u8868\uff0c\u53ea\u8981\u4f20\u8fdb\u6765\u7684\u57df\u540d\u5339\u914d\u4e86\u5217\u8868\u4e2d\u7684\u57df\u540d\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u76f8\u5e94 IP\uff0c\u8fd9\u5c31\u7b49\u6548\u4e8e hosts \u4e86\u3002"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'"dns": {\n  "hosts": {\n    "www.google.com": "127.0.0.1"\n  }\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u518d\u770b\u5185\u7f6e DNS \u7684 servers \u4e00\u9879\uff0c\u5982\u679c\u5185\u7f6e DNS \u8fd9\u6837\u914d\u7f6e\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'"dns": {\n  "servers": [\n    "8.8.8.8",\n    "223.5.5.5",\n    "localhost"\n  ]\n}\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u8def\u7531\u6a21\u5757\u4f20\u5165 ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com/",children:"www.bilibili.com"})," \u8fd9\u4e2a\u57df\u540d\uff0c\u60f3\u8981\u5b83\u7684 IP \u5730\u5740\uff0c\u5185\u7f6e DNS \u4f1a\u4ece\u4e0a\u81f3\u4e0b\u6309\u987a\u5e8f\uff0c\u5411 servers \u91cc\u6bcf\u4e2a DNS \u670d\u52a1\u5668\u53d1 DNS \u8bf7\u6c42\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5730\u6765\uff0c\u76f4\u5230\u6709\u7ed3\u679c\u8fd4\u56de\uff0c\u7136\u540e\u518d\u628a\u7ed3\u679c\u8fd4\u56de\u7ed9\u8def\u7531\u6a21\u5757\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u4ece\u5185\u7f6e DNS \u5411 servers \u5217\u8868\u4e2d\u7684 DNS \u670d\u52a1\u5668\u53d1\u51fa\u7684 DNS \u8bf7\u6c42\u7684\u6d41\u91cf\uff0c\u5e76\u4e0d\u662f\u4ece\u672c\u673a\u76f4\u63a5\u53d1\u5230\u5bf9\u5e94\u7684\u670d\u52a1\u5668\uff08localhost \u9664\u5916\uff09\uff0c\u800c\u662f\u4f1a\u901a\u8fc7 outbound \u53d1\u51fa\u53bb\uff0c\u5047\u5982\u662f Freedom outbound\uff0c\u7684\u786e\u8fd8\u662f\u4f1a\u4ece\u672c\u673a\u76f4\u63a5\u53d1\u5230\u76f8\u5e94 DNS \u670d\u52a1\u5668\uff0c\u4f46\u5047\u5982\u662f\u4e00\u4e2a VMess outbound\uff0cDNS \u8bf7\u6c42\u7684\u6d41\u91cf\u5c31\u4f1a\u88ab\u4ee3\u7406\u5230 VMess \u4ee3\u7406\u670d\u52a1\u5668\u4e0a\uff0c\u7531\u4ee3\u7406\u670d\u52a1\u5668\u53d1\u5230\u76f8\u5e94\u7684 DNS \u670d\u52a1\u5668\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u5185\u7f6e DNS \u53d1\u51fa\u7684\u8bf7\u6c42\u7684\u6d41\u91cf\u53ef\u80fd\u7684\u6d41\u7ecf\u7ebf\u8def\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"\u5185\u7f6e DNS -> \u901a\u8fc7\u8def\u7531\u529f\u80fd\u9009\u62e9\u4e86 Freedom outbound -> 8.8.8.8\n\u5185\u7f6e DNS -> \u901a\u8fc7\u8def\u7531\u529f\u80fd\u9009\u62e9\u4e86 VMess outbound -> VMess \u4ee3\u7406\u670d\u52a1\u5668 -> 8.8.8.8\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u4f7f\u7528\u54ea\u4e2a outbound\uff0c\u53d6\u51b3\u4e8e\u8def\u7531\u914d\u7f6e\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u6240\u4ee5\u8fd9\u91cc\u5c31\u5f88\u6709\u8da3\u4e86\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"1. \u8def\u7531\u6a21\u5757\u60f3\u8981 www.bilibili.com \u7684\u57df\u540d\uff0c\u8c03\u7528\u4e86\u5185\u7f6e DNS \u6a21\u5757\u53bb\u67e5\n2. \u5185\u7f6e DNS \u6a21\u5757\u5185\u90e8\u9700\u8981\u53d1\u4e2a DNS \u8bf7\u6c42\u53bb\u67e5\uff0c\u4f46\u5b83\u4e0d\u592a\u786e\u5b9a\u8981\u628a\u6d41\u91cf\u53d1\u5230\u54ea\u4e2a outbound\n3. \u5185\u7f6e DNS \u6a21\u5757\u4e8e\u662f\u8c03\u7528\u8def\u7531\u6a21\u5757\uff0c\u8ba9\u8def\u7531\u6765\u7ed9\u5b83\u51b3\u5b9a\u53d1\u5230 udp:8.8.8.8:53 \u7684\u6d41\u91cf\u7a76\u7adf\u8981\u4ea4\u7ed9\u54ea\u4e2a outbound \u6bd4\u8f83\u5408\u9002\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u53ef\u662f\u5462\uff0c\u8003\u8651\u4e00\u4e0b\u6211\u4eec\u7684\u914d\u7f6e\u4ee5\u53ca\u8981\u67e5\u8be2\u7684\u8fd9\u4e2a\u57df\u540d\uff0c8.8.8.8 \u5728\u5217\u8868\u7b2c\u4e00\u9879\uff0c\u8981\u5148\u7528\u5b83\u6765\u67e5\uff0c\u4f46\u6211\u4eec\u8981\u67e5\u7684\u57df\u540d\u662f ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com%EF%BC%8C%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4%E6%98%AF%E4%B8%8D%E5%A4%AA%E5%90%88%E9%80%82%E5%90%91",children:"www.bilibili.com\uff0c\u4e00\u822c\u6765\u8bf4\u662f\u4e0d\u592a\u5408\u9002\u5411"})," 8.8.8.8 \u67e5\u8fd9\u4e2a\u57df\u540d\u3002\u6240\u4ee5\u65e0\u8bba\u8def\u7531\u6a21\u5757\u5224\u65ad\u8d70 Freedom outbound \u8fd8\u662f VMess outbound\uff0c\u90fd\u4e0d\u5408\u9002\u3002\u56e0\u4e3a\u8d70 Freedom outbound \u53d1\u5230 8.8.8.8\uff0c\u6050\u6015\u8fd4\u56de\u7ed3\u679c\u662f\u5047\u7684\uff0c\u8d70 VMess outbound\uff0c\u6050\u6015\u8fd4\u56de\u7ed3\u679c\u662f\u56fd\u5916 CDN \u7684\u3002"]}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\u8fd9\u91cc\u5fc5\u987b\u518d\u63d2\u4e00\u6bb5\u8bdd\uff0c\u8981\u8003\u8651\u8fd4\u56de\u7ed3\u679c\u5982\u4f55\u5982\u4f55\uff0c\u6211\u4eec\u8fd8\u5f97\u8003\u8651\u8fd9\u4e2a\u8fd4\u56de\u7ed3\u679c\u662f\u7528\u6765\u5e72\u4ec0\u4e48\u7684\uff0c\u5982\u679c\u662f\u6211\u4eec\u5f53\u524d\u7684\u4f8b\u5b50\uff0c\u662f\u7528\u6765\u7ed9\u8def\u7531\u6a21\u5757\u505a IP \u89c4\u5219\u5339\u914d\u7684\uff0c\u90a3\u8fd4\u56de\u7ed3\u679c\u662f\u4e0d\u662f\u5047\u7684\u5e76\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f\u5b83\u662f\u5426\u80fd\u5339\u914d\u5230 direct \u89c4\u5219\uff1b\u5982\u679c\u8fd4\u56de\u7ed3\u679c\u7528\u4f5c\u5176\u5b83\u76ee\u7684\uff0c\u6bd4\u5982\u540e\u9762\u4f1a\u8bf4\u5230\u7684 DNS outbound\uff0c\u5c31\u53c8\u662f\u53e6\u4e00\u4e2a\u6545\u4e8b\u4e86~"}),"\n"]}),"\n",(0,c.jsxs)(e.p,{children:["\u56de\u5230\u4e3b\u7ebf\uff0c\u4e0d\u7ba1\u600e\u4e48\uff0c\u6211\u4eec\u4e0d\u60f3\u8003\u8651\u592a\u591a\u4e1c\u897f\uff0c\u6211\u4eec\u53ea\u60f3\u8fd9\u4e2a DNS \u8bf7\u6c42\u80fd\u591f\u5408\u7406\u5730\u53d1\u51fa\uff0c\u5f88\u660e\u663e\u7684\u4e00\u4e2a\u9009\u62e9\u5c31\u662f\u8ba9\u8fd9\u4e2a ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com/",children:"www.bilibili.com"})," \u7684 DNS \u8bf7\u6c42\u53d1\u5230 223.5.5.5\uff0c\u4e14\u8d70 Freedom outbound\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u90a3\u628a 223.5.5.5 \u653e\u5230\u5217\u8868\u7b2c\u4e00\u9879\u5982\u4f55\uff1f\u8fd9\u662f\u6cbb\u6807\u4e0d\u6cbb\u672c\uff0c\u60f3\u60f3\u5047\u5982\u53c8\u6709\u53e6\u4e00\u4e2a DNS \u8bf7\u6c42\u8981\u53d1\u5230 ",(0,c.jsx)(e.a,{href:"http://www.google.com/",children:"www.google.com"})," \u7684\uff0c\u8fd9\u4e2a\u8bf7\u6c42\u5148\u53d1\u5230 223.5.5.5 \u5c31\u53c8\u4e0d\u592a\u5408\u9002\u4e86\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["V2Ray \u5f53\u7136\u5df2\u7ecf\u8003\u8651\u5230\u8fd9\u60c5\u51b5\uff0c\u6709\u4e86\u6240\u8c13\u7684 ",(0,c.jsx)(e.code,{children:"DNS \u5206\u6d41"})," \u529f\u80fd\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'"dns": {\n  "servers": [\n    "8.8.8.8",\n    {\n      "address": "223.5.5.5",\n      "port": 53,\n      "domains": [\n        "domain:www.bilibili.com"\n      ]\n    },\n    "localhost"\n  ]\n}\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u8fd9\u6837\u914d\u7f6e\u5185\u7f6e DNS\uff0c\u867d\u7136 8.8.8.8 \u5728\u7b2c\u4e00\uff0c\u4f46\u56e0\u4e3a\u8981\u67e5\u8be2\u7684\u57df\u540d ",(0,c.jsx)(e.a,{href:"http://www.bilibili.com/",children:"www.bilibili.com"})," \u5339\u914d\u4e86\u7b2c\u4e8c\u9879\u4e2d\u7684\u57df\u540d\u89c4\u5219\uff0c\u5185\u7f6e DNS \u5c31\u4f1a\u4f18\u5148\u5411\u7b2c\u4e8c\u4e2a DNS \u670d\u52a1\u5668\u53d1\u51fa DNS \u8bf7\u6c42\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u91cc\u6709\u4e00\u4e2a\u5f88\u5bb9\u6613\u5ffd\u7565\u6389\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u9009\u62e9 outbound\uff0c\u6211\u4eec\u7528 DNS \u5206\u6d41\u529f\u80fd\u9009\u62e9\u4e86 DNS \u670d\u52a1\u5668\uff0c\u8fd8\u5f97\u5728\u8def\u7531\u4e2d\u914d\u7f6e\u5408\u9002\u7684\u89c4\u5219\uff0c\u6765\u9009\u5408\u9002\u7684 outbound \u5411\u8fd9\u4e2a DNS \u670d\u52a1\u5668\u53d1\u51fa DNS \u8bf7\u6c42\u6d41\u91cf\u3002"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"\u5185\u7f6e DNS \u67e5\u8be2 www.bilibili.com -> \u5185\u7f6e DNS \u901a\u8fc7\u5206\u6d41\u529f\u80fd\u9009\u62e9\u4e86 223.5.5.5 -> \u901a\u8fc7\u8def\u7531\u529f\u80fd\u9009\u62e9\u4e86 Freedom outbound -> 223.5.5.5\u5185\u7f6e DNS \u67e5\u8be2 www.bilibili.com -> \u5185\u7f6e DNS \u901a\u8fc7\u5206\u6d41\u529f\u80fd\u9009\u62e9\u4e86 223.5.5.5 -> \u901a\u8fc7\u8def\u7531\u529f\u80fd\u9009\u62e9\u4e86 VMess outbound -> VMess \u4ee3\u7406\u670d\u52a1\u5668 -> 223.5.5.5\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u5c31\u7b97 DNS \u5206\u6d41\u914d\u7f6e\u597d\u4e86\uff0c\u5982\u679c\u8def\u7531\u89c4\u5219\u914d\u7f6e\u4e0d\u5f53\uff0c\u8ba9 udp:223.5.5.5:53 \u7684\u6d41\u91cf\u8d70\u4e86 proxy\uff0c\u5c31\u6709\u53ef\u80fd\u53d1\u751f\u4e0a\u9762\u7b2c\u4e8c\u4e2a\u7ebf\u8def\uff0c\u8fd4\u56de\u7684 IP \u5730\u5740\u5c31\u6709\u53ef\u80fd\u662f Bilibili \u5728\u56fd\u5916 CDN \u7684 IP\u3002\uff08IP \u7ed3\u679c\u662f\u771f\u7684\uff0c\u53ea\u662f\u2026\uff09"}),"\n",(0,c.jsx)(e.p,{children:"\u6240\u4ee5\u5343\u4e07\u4e0d\u80fd\u5fd8\u8bb0\uff0c\u9664\u4e86\u914d\u7f6e\u597d DNS \u5206\u6d41\u57df\u540d\uff0c\u8fd8\u8981\u4e3a\u5404\u4e2a DNS \u670d\u52a1\u5668\u914d\u7f6e\u8def\u7531\u89c4\u5219\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'"routing": {\n    "domainStrategy": "IPIfNonMatch",\n    "rules": [\n        {\n            "type": "field",\n            "ip": [\n                "8.8.8.8"\n            ],\n            "outboundTag": "proxy"\n        },\n        {\n            "type": "field",\n            "ip": [\n                "223.5.5.5"\n            ],\n            "outboundTag": "direct"\n        }\n    ]\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u603b\u7ed3\u4e00\u4e0b\u4e0a\u9762\u7684\uff0c\u8981\u6b63\u786e\u914d\u7f6e V2Ray \u5185\u7f6e DNS\uff1a"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsx)(e.li,{children:"\u6b63\u786e\u914d\u7f6e servers \u5217\u8868\u53ca\u57df\u540d\u5206\u6d41\uff08\u7528\u57df\u540d\u4fe1\u606f\u6765\u9009 DNS \u670d\u52a1\u5668\uff09"}),"\n",(0,c.jsx)(e.li,{children:"\u6b63\u786e\u4e3a\u53d1\u51fa\u7684 DNS \u8bf7\u6c42\u914d\u7f6e\u8def\u7531\u89c4\u5219\uff08\u7528 DNS \u670d\u52a1\u5668\u7684\u5730\u5740\u4fe1\u606f\u4ee5\u53ca\u6d41\u91cf\u7684\u534f\u8bae\u4fe1\u606f\uff1aIP\uff0c\u7aef\u53e3\uff0ctcp/udp\uff09"}),"\n"]}),"\n",(0,c.jsxs)(e.p,{children:["V2Ray \u5185\u7f6e DNS \u8fd8\u6709\u4e00\u4e2a\u53eb ",(0,c.jsx)(e.code,{children:"clientIp"})," \u7684\u9879\u662f\u4ec0\u4e48\u7528\u7684\uff1f\u6211\u4e2a\u4eba\u4e0d\u592a\u5efa\u8bae\u53bb\u4f9d\u8d56\u8fd9\u4e2a\u9009\u9879\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u77e5\u9053\u5b83\u7684\u4f5c\u7528\uff0c\u662f\u8fd9\u6837\u7684\uff0c\u5047\u5982\u4e0a\u9762\u4f8b\u5b50\u4e2d\u771f\u7684\u5728\u8def\u7531\u89c4\u5219\u4e0a\u914d\u7f6e\u9519\u4e86\uff0c\u51fa\u73b0\u4e86\u8fd9\u4e2a\u7ebf\u8def\u7684\u60c5\u51b5\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"\u5185\u7f6e DNS \u67e5\u8be2 www.bilibili.com -> \u5185\u7f6e DNS \u901a\u8fc7\u5206\u6d41\u529f\u80fd\u9009\u62e9\u4e86 223.5.5.5 -> \u901a\u8fc7\u8def\u7531\u529f\u80fd\u9009\u62e9\u4e86 VMess outbound -> VMess \u4ee3\u7406\u670d\u52a1\u5668 -> 223.5.5.5\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u90a3 ",(0,c.jsx)(e.code,{children:"clientIP"})," \u662f DNS \u8bf7\u6c42\u4e2d\u53ef\u4ee5\u5e26\u4e0a\u7684\u4e00\u4e2a\u53c2\u6570\uff0c\u5b83\u7528\u6765\u63d0\u793a DNS \u670d\u52a1\u5668\uff08223.5.5.5\uff09\u4f60\u6240\u5728\u7684\u5730\u7406\u4f4d\u7f6e\uff0c223.5.5.5 \u5c31\u77e5\u9053\u4f60\u5728\u54ea\uff0c\u5c31 ",(0,c.jsx)(e.code,{children:"\u6709\u53ef\u80fd"})," \u4f1a\u8fd4\u56de\u4e00\u4e2a\u5408\u9002\u4f60\u6240\u5728\u7684\u5730\u7406\u4f4d\u7f6e\u7684 CDN \u7684 IP\uff08\u4e5f\u5373 Bilibili \u56fd\u5185 CDN \u7684 IP\uff09\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u5173\u4e8e\u5185\u7f6e DNS\uff0c\u6700\u540e\u518d\u8bf4\u4e00\u8bf4 ",(0,c.jsx)(e.code,{children:"localhost"})," \uff0c\u4e0a\u9762\u7684\u63cf\u8ff0\u4e0d\u9002\u7528\u4e8e localhost\uff0c\u7b80\u5355\u8bf4\uff0c\u5185\u7f6e DNS \u5728\u5411 servers \u5217\u8868\u4e2d\u7684 localhost \u53d1 DNS \u8bf7\u6c42\u65f6\uff0c\u4e0d\u4f1a\u7528\u4efb\u4f55 outbound \u6765\u53d1\uff08\u751a\u81f3\u4e0d\u7528 Freedom outbound\uff09\uff0c\u800c\u662f\u76f4\u63a5\u4ece\u672c\u673a\u53d1\u51fa\uff0c\u5c31\u50cf\u4efb\u4f55\u5176\u5b83\u7a0b\u5e8f\u505a DNS \u8bf7\u6c42\u90a3\u6837\uff0c\u76f4\u63a5\u8c03\u7528\u7cfb\u7edf\u7684 DNS API\uff0c\u7528\u7cfb\u7edf DNS \u4e2d\u914d\u7f6e\u7684 DNS \u670d\u52a1\u5668\u3002"]}),"\n",(0,c.jsx)(e.h3,{id:"v2ray-dns-outbound",children:"V2Ray DNS Outbound"}),"\n",(0,c.jsxs)(e.p,{children:["\u63a5\u4e0b\u6765\u4f1a\u8bf4\u4e00\u8bf4 V2Ray \u7684 DNS outbound\u3002\u56e0\u4e3a\u6211\u4eec\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u6240\u8bf4\u7684\u90fd\u662f\u8def\u7531\u6a21\u5757\u53bb\u8c03\u7528\u5185\u7f6e DNS\uff0c\u4f46\u8def\u7531\u6a21\u5757\u4ec5\u4ec5\u662f\u7528\u5b83\u7684\u7ed3\u679c\u6765\u505a\u89c4\u5219\u5339\u914d\uff0c\u800c\u4e14\u662f\u5f53\u914d\u7f6e\u4e86 ",(0,c.jsx)(e.code,{children:"IPIfNonMatch/IPOnDemand"})," \uff0c\u800c\u4e14\u6ca1\u6709\u5339\u914d\u4efb\u4f55\u57df\u540d\u89c4\u5219\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u7528\u5f97\u5230\u5b83\uff0c\u5f53\u4e0b\u5404\u79cd\u57df\u540d\u5217\u8868\u76db\u884c\uff0c\u5b83\u7684\u5e94\u7528\u8303\u56f4\u5b9e\u9645\u4e0a\u662f\u5f88\u7a84\u7684\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["DNS outbound \u53ef\u4ee5\u8bf4\u662f\u4e00\u4e2a\u628a\u5185\u7f6e DNS \u7684\u529f\u80fd\u771f\u6b63\u5730\u5f00\u653e\u51fa\u6765\uff0c\u8ba9\u5404\u79cd\u7a0b\u5e8f\u3001\u5404\u79cd\u6a21\u5757\u53ef\u4ee5\u66f4\u52a0\u65b9\u4fbf\u5730\u4f7f\u7528\u5f97\u4e0a\u5185\u7f6e DNS \u7684\u4e00\u4e2a\u529f\u80fd\u3002\u4e3a\u4ec0\u4e48\u8981\u628a\u5185\u7f6e DNS \u5f00\u653e\u51fa\u6765\u5462\uff1f\u5f88\u660e\u663e\u554a\uff0c\u56e0\u4e3a\u73b0\u5728\u5b83\u652f\u6301 ",(0,c.jsx)(e.code,{children:"DNS \u5206\u6d41"})," \uff0c\u76f8\u4fe1\u5927\u90e8\u5206\u8bfb\u8005\u90fd\u77e5\u9053\u5df2\u7ecf\u5b58\u5728\u5f88\u591a\u4e13\u95e8\u505a DNS \u5206\u6d41\u7684\u5de5\u5177\uff0c\u8fd9\u5df2\u7ecf\u8bf4\u660e DNS \u5206\u6d41\u662f\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u529f\u80fd\uff0c\u800c V2Ray \u5df2\u7ecf\u652f\u6301 DNS \u5206\u6d41\u4e86\uff0c\u53ef\u662f\u5916\u90e8\u7528\u4e0d\u4e86\u5c31\u7b49\u4e8e\u6ca1\u6709\uff0c\u6240\u4ee5\u5c31\u5f97\u5f00\u653e\u51fa\u6765\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u8981\u8bf4 DNS outbound \u7684\u914d\u7f6e\uff0c\u5b83\u76ee\u524d\u5c31\u53ea\u6709\u90a3\u4e48 3\uff08network, address, port\uff09\u4e2a\u914d\u7f6e\u9879\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'"outbounds": [\n    {\n        "tag": "dns-out",\n        "protocol": "dns",\n        "settings": {\n            "network": "tcp",\n            "address": "1.1.1.1",\n            "port": 53\n        }\n    }\n]\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u800c\u8fd9 3 \u4e2a\u914d\u7f6e\u9879\u5176\u5b9e\u90fd\u4e0d\u662f\u672c\u6587\u60f3\u8981\u5173\u6ce8\u7684\u70b9\uff0c\u4e0b\u6587\u53ea\u4f1a\u7a0d\u5fae\u63d0\u4e00\u4e0b\u3002DNS outbound \u6700\u91cd\u8981\u7684\u529f\u80fd\u662f\u5b83\u7684\u9ed8\u8ba4\u884c\u4e3a\uff1a\u5bf9\u8fdb\u6765\u7684 DNS \u6d41\u91cf\u8fdb\u884c\u62e6\u622a\u3001\u89e3\u6790\uff0c\u4ee5\u53ca\u5bf9 A, AAAA \u7c7b\u578b\u7684 DNS \u67e5\u8be2\u505a\u91cd\u65b0\u8f6c\u53d1\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u5176\u4e2d\u6700\u96be\u7406\u89e3\u7684\uff0c\u6050\u6015\u5c31\u662f\u201c\u62e6\u622a\u201d\u3001\u201c\u91cd\u65b0\u8f6c\u53d1\u201d\u4e24\u4e2a\u8bcd\u7684\u5177\u4f53\u610f\u601d\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u91cc\u53ef\u4ee5\u56de\u770b\u4e0a\u9762\u7684 F1\uff0c\u662f\u8fd9\u4e48\u63cf\u8ff0\u4e00\u822c DNS \u8bf7\u6c42\u7684\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"\u4e00\u822c\u8fd9\u79cd DNS \u8bf7\u6c42\u90fd\u662f\u7eaf\u6587\u672c\uff08\u6211\u4eec\u4e5f\u53ea\u8ba8\u8bba\u8fd9\u79cd DNS\uff09\uff0c\u5b83\u4eec\u6240\u6d41\u7ecf\u7684\u5404\u79cd\u8bbe\u5907\uff0c\u5404\u79cd\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u770b\u5230\uff0c\u53ef\u4ee5\u4fee\u6539\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u53d1\u51fa\u7684\u8bf7\u6c42\u53ef\u4ee5\u4fee\u6539\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u53ef\u4ee5\u4fee\u6539\uff0c\u751a\u81f3\u4fee\u6539\u8fc7\u540e\u6beb\u65e0\u75d5\u8ff9\uff0c\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u53d1\u51fa\u7684\u8bf7\u6c42\uff0cDNS \u670d\u52a1\u5668\u6ca1\u529e\u6cd5\u77e5\u9053\u5b83\u662f\u5426\u5728\u4e2d\u95f4\u94fe\u8def\u88ab\u4fee\u6539\u8fc7\uff0c\u5bf9\u4e8e\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u5e94\u7528\u7a0b\u5e8f\u4e5f\u6ca1\u529e\u6cd5\u77e5\u9053\u5b83\u662f\u5426\u5728\u4e2d\u95f4\u94fe\u8def\u88ab\u4fee\u6539\u8fc7\u3002\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u5bf9\u4e8e\u8fdb\u5165\u5230 DNS outbound \u91cc\u9762\u7684\u6d41\u91cf\uff0cDNS outbound \u4f1a\u628a\u8fd9\u4e2a\u6d41\u91cf\u5f53\u4f5c\u662f DNS \u8bf7\u6c42\uff0c\u4e5f\u5c31\u662f\u8bf4\u628a\u5b83\u5f53\u4f5c\u4e00\u5757\u6570\u636e\uff0c\u8fd9\u5757\u6570\u636e\u91cc\u9762\u5305\u542b\u4e86 DNS \u8bf7\u6c42\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1aDNS \u8bf7\u6c42\u7684\u57df\u540d\uff0cDNS \u8bf7\u6c42\u7684\u8bb0\u5f55\u7c7b\u578b\uff1b\u8fd8\u6709\u6240\u6709\u7c7b\u578b\u7684 outbound \u90fd\u80fd\u591f\u5f97\u5230\u7684\u4e00\u4e9b\u901a\u5e38\u7684\u4fe1\u606f\uff0c\u6bd4\u5982\u8fd9\u4e2a\u6d41\u91cf\u7684\u76ee\u7684\u5730\u5740\uff0c\u76ee\u7684\u7aef\u53e3\uff0c\u6240\u7528\u4f20\u8f93\u534f\u8bae\u7b49\u7b49\uff0c\u8fd9\u4e9b\u4fe1\u606f\u90fd\u662f DNS outbound \u80fd\u591f\u8f7b\u6613\u5f97\u5230\u7684\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u56e0\u4e3a DNS \u8bf7\u6c42\u91cc\u9762\u7684\u6570\u636e\u90fd\u662f\u660e\u6587\u7684\uff0c\u6d41\u7ecf\u7684\u4e2d\u95f4\u8bbe\u5907\u3001\u4e2d\u95f4\u6a21\u5757\u90fd\u770b\u5f97\u5230\u91cc\u9762\u5185\u5bb9\uff0c\u90a3 DNS \u8bf7\u6c42\u7684\u6d41\u91cf\u65e2\u7136\u6d41\u7ecf DNS outbound\uff0cDNS outbound \u7406\u6240\u5f53\u7136\u4e5f\u80fd\u770b\u5f97\u5230\uff1b\u800c\u4e14\u8fd4\u56de\u6570\u636e\u7684\u65f6\u5019\uff0c\u5c31\u7b97 DNS outbound \u628a\u8fd4\u56de\u7684\u6570\u636e\u5220\u6539\u4e86\uff0c\u6216\u8005\u7d22\u6027\u81ea\u5df1\u51ed\u7a7a\u751f\u6210\u4e00\u4e2a\u5047\u7684 DNS \u56de\u590d\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e94\u7528\u7a0b\u5e8f\u4e5f\u6ca1\u529e\u6cd5\u77e5\u9053\u771f\u5047\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u5c31\u662f DNS outbound \u7684\u5de5\u4f5c\u539f\u7406\u3002\u53ea\u4e0d\u8fc7\u5b83\u5e76\u4e0d\u662f\u51ed\u7a7a\u751f\u6210\u4e00\u4e2a\u5047\u7684 DNS \u56de\u590d\uff0c\u800c\u662f\u6c42\u52a9\u4e8e\u5185\u7f6e DNS \u6a21\u5757\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"1. \u67d0\u4e2a\u5e94\u7528\u7a0b\u5e8f\u53d1\u4e86\u4e00\u4e2a DNS \u67e5\u8be22. \u8fd9\u4e2a DNS \u67e5\u8be2\u7684\u6d41\u91cf\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\u8fdb\u5165\u4e86 DNS outbound\uff08\u8fd9\u91cc\u6682\u65f6\u4e0d\u8ba8\u8bba\u7a76\u7adf\u662f\u901a\u8fc7\u4ec0\u4e48\u65b9\u5f0f\u8fdb\u5165 DNS outbound \u7684\uff093. \u5982\u679c\u8fd9\u4e2a\u6d41\u91cf\u662f\u4e2a\u660e\u6587 DNS \u8bf7\u6c42\uff0cDNS outbound \u80af\u5b9a\u770b\u5f97\u5230\u91cc\u9762\u5185\u5bb9\uff0c\u53ef\u4ee5\u62ff\u51fa\u91cc\u9762\u7684\u57df\u540d4. DNS outbound \u8c03\u7528\u5185\u7f6e DNS \u6a21\u5757\uff0c\u628a\u62ff\u5230\u7684\u57df\u540d\u4f20\u8fdb\u53bb5. \u5185\u7f6e DNS \u6a21\u5757\u6839\u636e\u5b83\u7684\u914d\u7f6e\u53bb\u67e5\u8fd9\u4e2a\u57df\u540d\u7684 IP\uff0c\u5177\u4f53\u600e\u4e48\u67e5\u7684\uff0cDNS outbound \u5e76\u4e0d\u77e5\u9053\uff0c\u5b83\u53ea\u7ba1\u8981\u7ed3\u679c6. \u5185\u7f6e DNS \u8fd4\u56de\u4e00\u4e9b IP \u7ed9 DNS outbound \u540e\uff0cDNS outbound \u7528\u8fd9\u4e9b IP \u751f\u6210\u4e86\u4e00\u4e2a DNS \u56de\u590d7. DNS outbound \u628a\u8fd9\u4e2a DNS \u56de\u590d\u82e5\u65e0\u5176\u4e8b\u5730\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f8. \u5e94\u7528\u7a0b\u5e8f\u5f53\u7136\u4e0d\u77e5\u9053\u8fd9\u4e2a DNS \u56de\u590d\u5177\u4f53\u662f\u600e\u4e48\u6765\u7684\uff0c\u5b83\u6ca1\u529e\u6cd5\uff0c\u53ea\u80fd\u76f8\u4fe1\u4e2d\u95f4\u94fe\u8def\uff0c\u76f8\u4fe1\u8fd9\u4e2a\u56de\u590d\u5c31\u662f\u5b83\u60f3\u8981\u7684\u56de\u590d\n"})}),"\n",(0,c.jsx)(e.p,{children:"DNS outbound \u7684\u8fd9\u79cd\u884c\u4e3a\uff0c\u5b9e\u8d28\u4e0a\u76f8\u5f53\u4e8e DNS \u52ab\u6301\uff0c\u4f46\u8bf4\u5b83\u662f DNS \u52ab\u6301\u4e5f\u4e0d\u592a\u5bf9\uff0c\u56e0\u4e3a\u662f\u6211\u4eec\u914d\u7f6e\u7684\uff0c\u81ea\u613f\u8ba9\u5b83\u201c\u52ab\u6301\u201d\u7684\u561b\u3002"}),"\n",(0,c.jsx)(e.p,{children:"DNS outbound \u672c\u8eab\u7684\u5de5\u4f5c\u539f\u7406\u76f8\u4fe1\u5df2\u7ecf\u6bd4\u8f83\u6e05\u6670\u4e86\uff0c\u5b83\u53ea\u662f\u52ab\u6301\u4e86\u8fdb\u6765\u7684 DNS \u8bf7\u6c42\u7684\u6d41\u91cf\uff0c\u7136\u540e\u627e\u5185\u7f6e DNS \u6a21\u5757\u5e2e\u5fd9\u89e3\u6790 DNS\uff0c\u7136\u540e\u5047\u88c5\u5565\u4e8b\u6ca1\u53d1\u751f\uff0c\u8fd4\u56de\u7ed3\u679c\u800c\u5df2\u3002"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\u8981\u5e94\u7528\u5b83\uff0c\u91cd\u70b9\u5728\u4e8e\u8981\u7528\u4ec0\u4e48\u6837\u7684\u65b9\u5f0f\uff0c\u628a DNS \u6d41\u91cf\u5f15\u5bfc\u5230 DNS outbound \u91cc\u53bb\u3002"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u5bf9\u4e8e\u684c\u9762\u7cfb\u7edf\uff0c\u5982\u679c\u7528\u6d4f\u89c8\u5668\u6765\u8bbf\u95ee\u7f51\u7ad9\uff0c\u90a3\u4e48\uff0c\u524d\u9762\u4e5f\u8bf4\u4e86\uff0cSOCKS5 \u534f\u8bae\u53ef\u4ee5\u5e26\u4e0a\u57df\u540d\u7ed9\u8fdc\u7aef\u89e3\u6790\uff0c\u6839\u672c\u4e0d\u9700\u8981\u672c\u5730\u53bb\u89e3\u6790\u57df\u540d\u3002\u4f46\u5047\u5982\u4e0d\u662f\u7528\u6d4f\u89c8\u5668\u7684\u60c5\u51b5\u5462\uff1f\u6bd4\u5982\u8fd0\u884c\u4e00\u4e2a nslookup \u547d\u4ee4\uff0c\u9ed8\u8ba4\u5b83\u4e5f\u4e0d\u4f1a\u7528\u7cfb\u7edf\u8bbe\u7f6e\u7684\u4ee3\u7406\uff0c\u5b83\u662f\u76f4\u63a5\u5411\u7cfb\u7edf\u8bbe\u7f6e\u7684 DNS \u670d\u52a1\u5668\u53d1 DNS \u8bf7\u6c42\uff0c\u600e\u4e48\u628a\u8fd9\u4e2a\u8bf7\u6c42\u7684\u6d41\u91cf\u5f15\u5bfc\u5230 V2Ray \u7684 DNS outbound \u5462\uff1f"}),"\n",(0,c.jsx)(e.p,{children:"\u8003\u8651\u4e0b\u4ee5\u4e0b\u914d\u7f6e\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'{\n    "inbounds": [\n        {\n            "port": 53,\n            "tag": "dns-in",\n            "protocol": "dokodemo-door",\n            "settings": {\n                "address": "1.1.1.1",\n                "port": 53,\n                "network": "tcp,udp"\n            }\n        }\n    ],\n    "dns": {\n        "hosts": {\n            "domain:www.bilibili.com": "1.2.3.4"\n        }\n    },\n    "outbounds": [\n        {\n            "protocol": "dns",\n            "tag": "dns-out"\n        },\n        {\n            "protocol": "freedom",\n            "tag": "direct",\n            "settings": {}\n        }\n    ],\n    "routing": {\n        "rules": [\n            {\n                "type": "field",\n                "inboundTag": ["dns-in"],\n                "outboundTag": "dns-out"\n            }\n        ],\n        "strategy": "rules"\n    }\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u4e2a\u914d\u7f6e\u8ba9 V2Ray \u7684 dokodemo-door inbound \u76d1\u542c\u5728\u672c\u5730 53 \u7aef\u53e3\uff0c\u5bf9\u4e8e\u4efb\u4f55\u8fdb\u6765\u7684\u6d41\u91cf\uff0c\u4f1a\u56e0\u4e3a\u6211\u4eec\u7684\u8def\u7531\u89c4\u5219\uff0c\u800c\u88ab\u9001\u5230 DNS outbound \u5904\u7406\uff0c\u7136\u540e\u6211\u4eec\u628a\u7cfb\u7edf DNS \u8bbe\u7f6e\u4e3a 127.0.0.1\uff0c\u76f8\u5f53\u4e8e\u8bf4 V2Ray \u7684 dokodemo-door inbound \u5c31\u662f\u4e00\u4e2a DNS \u670d\u52a1\u5668\u3002"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'1. \u547d\u4ee4\u884c\u6267\u884c nslookup www.bilibili.com\n2. \u56e0\u4e3a\u7cfb\u7edf DNS \u8bbe\u7f6e\u4e3a 127.0.0.1\n3. DNS \u8bf7\u6c42\u53d1\u5230 dokodemo-door inbound\n4. \u56e0\u4e3a "dns-in" -> "dns-out" \u8def\u7531\u89c4\u5219\uff0c\u6d41\u91cf\u4f20\u7ed9 DNS outbound\n5. DNS outbound \u8bc6\u522b\u5230\u662f\u4e2a DNS \u8bf7\u6c42\uff0c\u62ff\u5230\u57df\u540d www.bilibili.com\uff0c\u8c03\u7528\u5185\u7f6e DNS\n6. \u8fd9\u4e2a\u57df\u540d\u5339\u914d\u5230\u5185\u7f6e DNS \u7684\u4e00\u6761 hosts \u89c4\u5219\uff0c\u8fd4\u56de\u7ed3\u679c 1.2.3.4\n7. \u4e8e\u662f nslookup \u67e5\u8be2 www.bilibili.com \u7684\u7ed3\u679c\u662f 1.2.3.4\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u8ba9 V2Ray \u5145\u5f53 DNS \u670d\u52a1\u5668\uff0c\u8bbe\u7f6e\u7cfb\u7edf DNS \u662f\u5176\u4e2d\u4e00\u4e2a\u628a DNS \u6d41\u91cf\u5f15\u5bfc\u5230 DNS outbound \u4e2d\u7684\u65b9\u5f0f\u3002\u4f46\u4eca\u5929\u6211\u4eec\u5927\u90e8\u5206\u7684\u4e0a\u7f51\u64cd\u4f5c\u90fd\u662f\u5728\u6d4f\u89c8\u5668\u4e0a\u8fdb\u884c\u4e86\uff0c\u6d4f\u89c8\u5668\u7528\u4e86 SOCKS5 \u4ee3\u7406\u7684\u8bdd\u4e5f\u4e0d\u9700\u8981\u672c\u5730\u53bb\u89e3\u6790 DNS\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5e94\u7528\u573a\u666f\u4e0d\u5e38\u89c1\u3002"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"DNS outbound \u5f00\u653e\u51fa\u6765\u540e\uff0c\u6700\u91cd\u8981\u7684\u5e94\u7528\u573a\u666f\uff0c\u662f\u5728\u79fb\u52a8\u7aef\u548c\u8def\u7531\u5668\u4e0a\u3002"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u5728\u8ba8\u8bba\u79fb\u52a8\u7aef\u548c\u8def\u7531\u5668\u4e4b\u524d\uff0c\u5148\u770b\u770b\u684c\u9762\u7cfb\u7edf\u4e0a\u600e\u6837\u53ef\u4ee5\u505a\u771f\u6b63\u7684\u5168\u5c40\u4ee3\u7406\u3002\u524d\u9762\u4e5f\u8bf4\u4e86\uff0c\u4e00\u822c\u7684\u6d4f\u89c8\u5668\u4ee3\u7406\uff0c\u53ea\u4ee3\u7406\u6d4f\u89c8\u5668\u7684\u6d41\u91cf\uff0c\u8981\u628a DNS \u6d41\u91cf\u4e5f\u4ee3\u7406\u4e86\uff0c\u5c31\u9700\u8981\u50cf\u4e0a\u9762\u90a3\u6837\u66f4\u6539\u7cfb\u7edf DNS \u4e3a 127.0.0.1\uff0c\u5f53\u6211\u4eec\u9700\u8981\u771f\u6b63\u7684\u5168\u5c40\u4ee3\u7406\u65f6\uff08VPN \u5c31\u662f\u771f\u6b63\u7684\u5168\u5c40\u4ee3\u7406\uff09\uff0c\u8fd9\u79cd\u65b9\u4fbf\u663e\u7136\u4e0d\u5408\u9002\uff0c\u4e5f\u4e0d\u53ef\u80fd\u505a\u5f97\u5230\u771f\u6b63\u5168\u5c40\u4ee3\u7406\u3002"}),"\n",(0,c.jsx)(e.h3,{id:"tun2socks",children:"tun2socks"}),"\n",(0,c.jsx)(e.p,{children:"\u4e0b\u9762\u4ecb\u7ecd\u4e00\u79cd\u901a\u8fc7 tun2socks\uff0c\u80fd\u591f\u628a\u6240\u6709\u672c\u673a\u5e94\u7528\u7a0b\u5e8f\u53d1\u51fa\u7684\u6d41\u91cf\u90fd\u4ea4\u7ed9 V2Ray/SOCKS/Shadowsocks\uff0c\u4ece\u800c\u8fbe\u5230\u5168\u5c40 TCP/UDP \u4ee3\u7406\uff08\u5bf9\uff0c\u53ea\u662f TCP/UDP\uff0cICMP \u7b49\u7b49\u662f\u4e0d\u652f\u6301\u7684\uff0c\u5168\u5c40\u6027\u8fd8\u662f\u4e0d\u6bd4\u771f\u6b63\u7684 VPN\uff09\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["\u4e3a\u6b64\u6211\u7279\u610f\u5199\u4e86\u4e00\u7bc7\u5173\u4e8e\u5728 Windows \u4e0a\u5982\u4f55\u4f7f\u7528 tun2socks \u5b9e\u73b0\u5168\u5c40 TCP/UDP \u6d41\u91cf\u4ee3\u7406\u7684\u6559\u7a0b\uff1a## ",(0,c.jsx)(e.a,{href:"https://medium.com/@TachyonDevel/%E6%95%99%E7%A8%8B-%E5%9C%A8-windows-%E4%B8%8A%E4%BD%BF%E7%94%A8-tun2socks-%E8%BF%9B%E8%A1%8C%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86-aa51869dd0d?source=post_page-----62c50e58cbd0---------------------------------------",children:"[\u6559\u7a0b] \u5728 Windows \u4e0a\u4f7f\u7528 tun2socks \u8fdb\u884c\u5168\u5c40\u4ee3\u7406"})]}),"\n",(0,c.jsx)(e.p,{children:"\u8fd9\u662f\u4e00\u7bc7\u5728 Windows \u4e0a\u4f7f\u7528 tun2socks \u8fdb\u884c\u5168\u5c40 TCP/UDP \u6d41\u91cf\u4ee3\u7406\u7684\u6559\u7a0b\uff0c\u6709\u522b\u4e8e\u4e00\u822c\u4ec5\u4f7f\u7528 SOCKS5\u2026"}),"\n",(0,c.jsx)(e.p,{children:"medium.com"}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.a,{href:"https://medium.com/@TachyonDevel/%E6%95%99%E7%A8%8B-%E5%9C%A8-windows-%E4%B8%8A%E4%BD%BF%E7%94%A8-tun2socks-%E8%BF%9B%E8%A1%8C%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86-aa51869dd0d?source=post_page-----62c50e58cbd0---------------------------------------",children:"View original"})}),"\n",(0,c.jsx)(e.p,{children:"tun2socks \u5c31\u662f\u8fd9\u4e48\u4e00\u79cd\u53ef\u4ee5\u628a\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u7684 TCP/UDP \u6d41\u91cf\u90fd\u4ea4\u7ed9 V2Ray \u7684\u65b9\u5f0f\uff0c\u5f53\u7136\u5176\u4e2d\u5305\u62ec DNS \u7684\u6d41\u91cf\uff0c\u6240\u4ee5\u7528\u4e86 tun2socks \u540e\uff0c\u6211\u4eec\u751a\u81f3\u4e0d\u9700\u8981\u66f4\u6539\u7cfb\u7edf\u7684 DNS \u8bbe\u7f6e\uff0c\u6240\u6709 DNS \u8bf7\u6c42\u7684\u6d41\u91cf\u90fd\u80fd\u591f\u88ab\u5f15\u5bfc\u5230 V2Ray\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5728 V2Ray \u91cc\u52a0\u4e00\u6761\u8def\u7531\u89c4\u5219\uff0c\u8bc6\u522b\u51fa DNS \u7684\u6d41\u91cf\uff0c\u628a\u8fd9\u4e9b\u6d41\u91cf\u8f6c\u7ed9 DNS outbound\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'{\n    "dns": {\n        "hosts": {\n            "domain:www.bilibili.com": "1.2.3.4"\n        }\n    },\n    "outbounds": [\n        {\n            "protocol": "dns",\n            "tag": "dns-out"\n        },\n        {\n            // VMess outbound\n        }\n    ],\n    "routing": {\n        "rules": [\n            {\n                "type": "field",\n                "network": "udp",\n                "port": 53,\n                "outboundTag": "dns-out"\n            }\n        ],\n        "strategy": "rules"\n    }\n}\n'})}),"\n",(0,c.jsxs)(e.p,{children:["\u914d\u7f6e\u505a\u4e86\u7b80\u5316\uff0c\u771f\u62ff\u6765\u7528\u7684\u8bdd\u8981\u81ea\u5df1\u8865\u4e0a\u5176\u5b83\u90e8\u5206\u3002\u914d\u7f6e\u4e2d\u6ca1\u6709 inbound\uff0c\u56e0\u4e3a\u6211\u4eec\u6240\u7528\u7684 tun2socks \u8f6f\u4ef6\uff1a ",(0,c.jsx)(e.a,{href:"https://github.com/eycorsican/go-tun2socks",children:"go-tun2socks"})," \u672c\u8eab\u628a tun2socks \u5185\u7f6e\u4e3a V2Ray \u7684\u4e00\u4e2a inbound \u4e86\u3002"]}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"go-tun2socks"})," \u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u8981\u4f7f\u7528\u7684\u8bdd\u8fd8\u8981\u81ea\u5df1\u521b\u5efa TUN \u63a5\u53e3\uff0c\u914d\u7f6e\u8def\u7531\u8868\u7b49\uff0c\u6bd4\u8f83\u7e41\u7410\uff0c\u8fd9\u91cc\u8fd8\u6709\u53e6\u4e00\u4e2a\u5e94\u7528\u53eb ",(0,c.jsx)(e.a,{href:"https://github.com/eycorsican/Mellow",children:"Mellow"})," \uff0c\u5bf9 ",(0,c.jsx)(e.code,{children:"go-tun2socks"})," \u8fdb\u884c\u4e86\u5305\u88c5\uff0c\u53ef\u4ee5\u81ea\u52a8\u5b8c\u6210\u8fd9\u4e9b\u7e41\u7410\u7684\u6b65\u9aa4\uff0c\u5b9e\u9645\u4f7f\u7528\u8d77\u6765\u7684\u6548\u679c\u5c31\u76f8\u5f53\u4e8e Proxifier\u3001SSTap\u3001Surge for Mac \u7b49\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u628a\u6240\u6709\u6d41\u91cf\u90fd\u4ee3\u7406\u4e86\uff1a## ",(0,c.jsx)(e.a,{href:"https://github.com/eycorsican/Mellow?source=post_page-----62c50e58cbd0---------------------------------------",children:"eycorsican/Mellow"})]}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"A V2Ray client that can handle all TCP/UDP/ICMP traffic. - eycorsican/Mellow"}),"\n",(0,c.jsx)(e.p,{children:"github.com"}),"\n",(0,c.jsx)(e.p,{children:(0,c.jsx)(e.a,{href:"https://github.com/eycorsican/Mellow?source=post_page-----62c50e58cbd0---------------------------------------",children:"View original"})}),"\n",(0,c.jsx)(e.p,{children:"\u8bf4\u767d\u4e86\uff0c\u76ee\u7684\u8fd8\u662f\u4e4b\u524d\u6240\u8bf4\u7684\uff0c\u627e\u5230\u4e00\u79cd\u65b9\u6cd5\u628a DNS \u8bf7\u6c42\u7684\u6d41\u91cf\u5f15\u5bfc\u5230 DNS outbound \u4e2d\u3002"}),"\n",(0,c.jsx)(e.h3,{id:"\u79fb\u52a8\u7aef\u73af\u5883",children:"\u79fb\u52a8\u7aef\u73af\u5883"}),"\n",(0,c.jsxs)(e.p,{children:["\u4e0a\u9762\u63d0 tun2socks\uff0c\u662f\u56e0\u4e3a\u5728\u79fb\u52a8\u7aef\u4e0a\uff0c\u8981\u4ee3\u7406\u6240\u6709 app \u7684\u6d41\u91cf\uff0ctun2socks \u662f\u4e00\u79cd\u5fc5\u987b\u7684\u624b\u6bb5\uff0c\u5b83\u4eec\u8ddf\u684c\u9762\u7cfb\u7edf\u4e0a\u7528 tun2socks \u5f88\u76f8\u4f3c\uff0c\u90fd\u662f\u8981\u628a\u6240\u6709\u7684 TCP/UDP \u6d41\u91cf\u5f15\u5bfc\u8fdb V2Ray\uff0c\u4f46\u4e5f\u6709\u4e0d\u4e00\u6837\u7684\u5730\u65b9\uff0c ",(0,c.jsx)(e.em,{children:"\u79fb\u52a8\u7aef\u7cfb\u7edf\u4e00\u822c\u90fd\u63d0\u4f9b\u4e86\u7279\u6b8a\u7684\u65b9\u6cd5\uff0c\u80fd\u591f\u8ba9\u6307\u5b9a\u7684\u6d41\u91cf\u4e0d\u53d7\u8def\u7531\u8868\u57fa\u4e8e IP \u5730\u5740\u7684\u8def\u7531\u63a7\u5236"})," \u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u5728\u79fb\u52a8\u7aef\u7cfb\u7edf\u65b9\u9762\uff0ciOS \u65e2\u53ef\u4ee5\u50cf\u684c\u9762\u7cfb\u7edf\u7528 tun2socks \u90a3\u6837\u628a\u6240\u6709 TCP/UDP \u6d41\u91cf\u5f15\u5bfc\u5230 V2Ray\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a HTTP \u4ee3\u7406\u628a HTTP \u8bf7\u6c42\u4ee3\u7406\u5230 V2Ray \u7684 HTTP inbound \u91cc\uff1b\u800c Android\uff0c\u53ea\u80fd\u4ee5 tun2socks \u90a3\u6837\u7684\u65b9\u5f0f\u628a TCP/UDP \u6d41\u91cf\u5f15\u5bfc\u8fdb\u53bb\u3002"}),"\n",(0,c.jsx)(e.p,{children:"iOS \u7684 HTTP/S \u4ee3\u7406\u8ddf SOCKS5 \u4ee3\u7406\u6bd4\u8f83\u76f8\u4f3c\uff0c\u5e94\u7528\u7a0b\u5e8f\u4e0d\u9700\u8981\u81ea\u5df1\u89e3\u6790 DNS\uff0c\u53ef\u4ee5\u628a\u57df\u540d\u5e26\u4e0a\u4ea4\u7ed9 V2Ray\uff0c\u7136\u540e\u5982\u679c\u8bf7\u6c42\u5339\u914d\u5230\u4ee3\u7406\u7684\u8def\u7531\u89c4\u5219\uff0c\u8fd9\u4e2a\u57df\u540d\u5c31\u901a\u8fc7\u4ee3\u7406\u534f\u8bae\uff08VMess/Shadowsocks/SOCKS5\uff09\u4ea4\u7ed9\u4ee3\u7406\u670d\u52a1\u5668\u81ea\u5df1\u53bb\u89e3\u6790\uff0c\u6240\u4ee5\u672c\u5730\u4e0d\u9700\u8981\u505a\u4efb\u4f55 DNS \u89e3\u6790\u3002\u95ee\u9898\u662f\u5f88\u660e\u663e\u8fd9\u4e2a\u53ea\u9002\u7528\u4e8e HTTP/S \u8bf7\u6c42\uff08\u800c\u4e14\u5e76\u4e0d\u662f\u6240\u6709\u7684 HTTP/S \u8bf7\u6c42\uff0c\u8c8c\u4f3c\u5e94\u7528\u7a0b\u5e8f\u8fd8\u5fc5\u987b\u8981\u7528 iOS \u7cfb\u7edf\u63d0\u4f9b\u7684 HTTP \u5e93\u6765\u505a\u8bf7\u6c42\u624d\u4f1a\u88ab\u4ee3\u7406\u5230\uff09\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u518d\u8003\u8651\u5230 Android \u5e76\u4e0d\u80fd\u5f88\u81ea\u7136\u5730\u652f\u6301 HTTP/S \u6216\u8005 SOCKS5 \u4ee3\u7406\uff0c\u6240\u4ee5\u60f3\u8981\u4e00\u4e2a\u901a\u7528\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u8fd8\u662f\u8981\u4ece TCP/UDP \u6d41\u91cf\u5165\u624b\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["\u5047\u5982\u4f60\u4f7f\u7528\u7684 Android \u5ba2\u6237\u7aef\u662f ",(0,c.jsx)(e.a,{href:"https://play.google.com/store/apps/details?id=fun.kitsunebi.kitsunebi4android",children:"Kitsunebi"})," \uff0c\u90a3\u5927\u81f4\u4e0a\u53ef\u4ee5\u8fd9\u4e48\u914d\u7f6e\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:'{\n    "dns": {\n        "hosts": {\n            "domain:www.bilibili.com": "1.2.3.4"\n        },\n        "servers": [\n            "114.114.114.114",\n            {\n                "address": "8.8.8.8",\n                "domains": [\n                    "google"\n                ],\n                "port": 53\n            }\n        ]\n    },\n    "outbounds": [\n        {\n            "protocol": "vmess",\n            "tag": "proxy"\n        },\n        {\n            "protocol": "freedom",\n            "settings": {},\n            "tag": "direct"\n        },\n     {\n         "protocol": "dns",\n         "tag": "dns-out"\n     }\n    ],\n    "routing": {\n        "rules": [\n            {\n                "inboundTag": ["tun2socks"],\n                "network": "udp",\n                "port": 53,\n                "outboundTag": "dns-out",\n                "type": "field"\n            },\n            {\n                "ip": [\n                    "8.8.8.8/32"\n                ],\n                "outboundTag": "proxy",\n                "type": "field"\n            }\n        ],\n        "strategy": "rules"\n    }\n}\n'})}),"\n",(0,c.jsx)(e.p,{children:"\u914d\u7f6e\u4e2d\u7684 inboundTag tun2socks \u662f\u5fc5\u987b\u7684\uff0c\u867d\u7136\u5355\u51ed 53 \u7aef\u53e3 \u548c network udp \u5927\u81f4\u8fbe\u5230\u8bc6\u522b\u51fa UDP \u6d41\u91cf\u7684\u76ee\u7684\uff0c\u4f46\u56e0\u4e3a\u5728 V2Ray \u4e2d UDP \u6d41\u91cf\u5e76\u4e0d\u53ea\u4ece tun2socks inbound \u8fdb\u6765\uff0c\u8fd8\u4f1a\u4ece \u5185\u7f6e DNS \u90a3\u8fb9\u8fc7\u6765\uff0c\u5982\u679c\u4e0d\u52a0\u4e0a inboundTag tun2socks \u8fd9\u4e2a\u9650\u5236\uff0c\u5185\u7f6e DNS \u90a3\u8fb9\u8fc7\u6765\u7684\u6d41\u91cf\u5c31\u4f1a\u88ab\u8f6c\u5230 DNS outbound\uff0c\u63a5\u7740\u6709\u53ef\u80fd\u53c8\u88ab\u8f6c\u7ed9 \u5185\u7f6e DNS\uff0c\u9020\u6210\u73af\u8def\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u901a\u8fc7\u524d\u9762\u684c\u9762\u7aef\u4e0a\u5bf9 V2Ray \u7684 \u5185\u7f6e DNS \u548c DNS outbound \u7684\u8bf4\u660e\uff0c\u73b0\u5728\u79fb\u52a8\u7aef\u4e5f\u53ef\u4ee5\u65b9\u4fbf\u5730\u62ff\u5230\u6240\u6709 TCP/UDP \u6d41\u91cf\uff0c\u4e0a\u9762\u7684\u65b9\u6cd5\u90fd\u53ef\u4ee5\u5957\u7528\u4e0b\u6765\uff0c\u5c31\u4e0d\u7ee7\u7eed\u8bf4\u4e86\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u5927\u4f53\u4e0a\uff0c\u4ece\u6d41\u91cf\u6d41\u5411\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u4e00\u822c DNS \u5904\u7406\u65b9\u5f0f\u4e5f\u5c31 3 \u79cd\uff1a"}),"\n",(0,c.jsxs)(e.ul,{children:["\n",(0,c.jsx)(e.li,{children:"\u76f4\u63a5\u4ece\u672c\u673a\u53d1\u51fa DNS \u8bf7\u6c42\u5230\u76ee\u7684 DNS \u670d\u52a1\u5668"}),"\n",(0,c.jsx)(e.li,{children:"\u901a\u8fc7\u4ee3\u7406\u628a DNS \u8bf7\u6c42\u53d1\u9001\u5230\u76ee\u7684 DNS \u670d\u52a1\u5668"}),"\n",(0,c.jsx)(e.li,{children:"\u672c\u673a\u4e0d\u5411\u4e92\u8054\u7f51\u53d1\u51fa DNS \u8bf7\u6c42\u6d41\u91cf\uff08\u7531\u8fdc\u7aef\u4ee3\u7406\u670d\u52a1\u5668\u6765\u89e3\u6790\u6216\u8005\u76f4\u63a5\u672c\u5730\u4f2a\u9020 DNS \u7b54\u590d\u8fd4\u56de\uff09"}),"\n"]}),"\n",(0,c.jsx)(e.h3,{id:"fake-dns",children:"Fake DNS"}),"\n",(0,c.jsx)(e.p,{children:"\u867d\u7136\u73b0\u5728\u5df2\u7ecf\u53ef\u4ee5\u5b8c\u5168\u5229\u7528 V2Ray \u7684 DNS \u529f\u80fd\u6a21\u5757\u5bf9 DNS \u7684 UDP \u6d41\u91cf\u505a\u5404\u79cd\u5904\u7406\uff0c\u53ef\u4ee5\u5bf9 DNS \u8bf7\u6c42\u6309\u57df\u540d\u505a\u5206\u6d41\uff0c\u4f46\u4ed4\u7ec6\u60f3\u60f3\uff0c\u5206\u6d41\u65f6\u4e0d\u7ba1\u662f\u53d1\u5230 freedom outbound \u76f4\u8fde\u8fd8\u662f\u53d1\u5230 VMess outbound \u4ee3\u7406\uff0c\u8fd9\u4e9b DNS \u8bf7\u6c42\u7ec8\u7a76\u662f\u8981\u4ee5\u5b9e\u9645\u7684\u6d41\u91cf\u5f62\u5f0f\u4ece\u672c\u5730\u53d1\u9001\u5230\u4e92\u8054\u7f51\u4e0a\uff0c\u662f\u5426\u6709\u65b9\u6cd5\u53ef\u4ee5\u5728\u5229\u7528 tun2socks \u83b7\u53d6\u6240\u6709 TCP/UDP \u6d41\u91cf\u7684\u540c\u65f6\uff0c\u53c8\u53ef\u4ee5\u50cf HTTP/S \u548c SOCKS5 \u4ee3\u7406\u90a3\u6837\uff0c\u672c\u5730\u5b8c\u5168\u4e0d\u53d1\u51fa DNS \u8bf7\u6c42\u6d41\u91cf\uff0c\u53ea\u628a\u57df\u540d\u4ea4\u7ed9\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u8ba9\u4ee3\u7406\u670d\u52a1\u5668\u81ea\u5df1\u53bb\u89e3\u6790\u5462\uff1f"}),"\n",(0,c.jsxs)(e.p,{children:["\u7b54\u6848\u662f\u6709\u7684\uff0c\u90a3\u5c31\u662f Fake DNS\uff0cFake DNS \u662f\u6709\u4e00\u4e2a ",(0,c.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc3089",children:"RFC"})," \u7684\uff0c\u67d0\u4e9b\u4f7f\u7528 iOS \u7684\u8bfb\u8005\u53ef\u80fd\u4e5f\u5e76\u4e0d\u964c\u751f\uff0cSurge \u4e2d\u7684 ",(0,c.jsx)(e.code,{children:"force-remote-dns"})," \u5c31\u662f\u5229\u7528\u4e86\u8fd9\u79cd\u6280\u672f\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u5927\u81f4\u5de5\u4f5c\u539f\u7406\u5982\u4e0b\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-c",children:"1. \u624b\u673a\u4e0a\u67d0\u4e2a app \u60f3\u53d1\u51fa https://www.google.com \u8bf7\u6c42 2. app \u53d1\u51fa www.google.com \u7684 DNS \u67e5\u8be2 3. DNS \u8bf7\u6c42\u7684 UDP \u6d41\u91cf\u6765\u5230 tun2socks\uff0c\u88ab tun2socks \u4ea4\u5230 Fake DNS \u6a21\u5757 4. Fake DNS \u6a21\u5757\u9009\u62e9\u4e00\u4e2a\u4f2a\u9020\u7684 IP \u5730\u5740\uff0c\u6bd4\u5982 244.0.0.3\uff0c\u5e76\u628a\u8fd9\u4e2a\u5730\u5740\u8ddf www.google.com \u5173\u8054\u8d77\u6765 5. Fake DNS \u6839\u636e DNS \u8bf7\u6c42\uff0c\u751f\u6210\u76f8\u5e94\u7684 DNS \u7b54\u590d\uff0c\u5e76\u628a 244.0.0.3 \u5f53\u4f5c DNS \u7ed3\u679c\u653e\u8fdb\u7b54\u590d\u4e2d\uff0c\u901a\u8fc7 tun2socks \u628a\u8fd9\u4e2a\u4f2a\u9020\u7684 DNS \u7b54\u590d\u8fd4\u56de\u7ed9 app6. app \u5f97\u5230 www.google.com \u7684 DNS \u67e5\u8be2\u7ed3\u679c\u662f 244.0.0.37. app \u5411 244.0.0.3 \u53d1\u51fa HTTP \u8bf7\u6c42\u6d41\u91cf 8. HTTP \u8bf7\u6c42\u6d41\u91cf\u6765\u5230 tun2socks\uff0ctun2socks \u5411 Fake DNS \u6a21\u5757\u67e5\u8be2\u76ee\u7684\u5730\u5740 244.0.0.3 \u662f\u5426\u662f\u4e00\u4e2a\u4f2a\u9020\u7684 IP \u5730\u5740\uff0c\u5982\u679c\u662f\uff0c\u5411 Fake DNS \u67e5\u8be2\u8fd9\u4e2a IP \u6240\u5173\u8054\u7684 \u57df\u540d\uff0c\u4e5f\u5373 www.google.com9. tun2socks \u73b0\u5728\u5df2\u7ecf\u5f97\u5230 HTTP \u8bf7\u6c42\u6d41\u91cf\u7684\u57df\u540d\uff0c\u628a\u6d41\u91cf\u4ee5\u53ca\u57df\u540d\u4e00\u5e76\u4ea4\u7ed9 V2Ray10. V2Ray \u6709\u4e86\u57df\u540d\uff0c\u63a5\u4e0b\u6765\u8def\u7531\u4ec0\u4e48\u7684\u8be5\u600e\u4e48\u5904\u7406\u5c31\u600e\u4e48\u5904\u7406\u4e86\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u4e0a\u9762\u8fc7\u7a0b\u4e2d\uff0c\u867d\u7136 app \u662f\u53d1\u51fa\u4e86 DNS \u8bf7\u6c42\u6d41\u91cf\uff0c\u4f46\u8fd9\u4e2a\u6d41\u91cf\u88ab\u62e6\u622a\u4e0b\u6765\u4e86\uff0c\u5e76\u6ca1\u6709\u771f\u6b63\u5730\u53d1\u5230\u4e92\u8054\u7f51\u4e0a\uff1b\u6700\u7ec8 V2Ray \u4e5f\u62ff\u5230\u4e86\u57df\u540d\uff0c\u5982\u679c\u8fd9\u4e2a\u57df\u540d\u5339\u914d\u5230\u4ee3\u7406\u89c4\u5219\uff0c\u5c31\u4f1a\u4ea4\u5230\u4ee3\u7406\u670d\u52a1\u5668\u6765\u89e3\u6790\uff0c\u4e5f\u5c31\u662f\u6240\u8c13\u7684 \u8fdc\u7a0b DNS \u89e3\u6790\u3002"}),"\n",(0,c.jsx)(e.p,{children:"\u4e0a\u9762\u8fc7\u7a0b\u4e2d\uff0cFake DNS \u6a21\u5757\u5982\u679c\u6ca1\u6709\u5bf9\u57df\u540d\u505a\u8fc7\u6ee4\uff0c\u5bf9\u4efb\u4f55\u57df\u540d\u90fd\u8fd4\u56de\u4f2a\u9020\u7684 IP \u5730\u5740\uff0c\u5219\u53ef\u80fd\u4f1a\u5f15\u8d77\u4e00\u4e9b\u95ee\u9898\uff0c\u6709\u4e00\u79cd\u505a\u6cd5\u662f\u5728 Fake DNS \u6a21\u5757\u91cc\u5185\u7f6e\u4e00\u4e2a\u57df\u540d\u5217\u8868\uff0c\u53ea\u5bf9\u5339\u914d\u5230\u5217\u8868\u7684\u57df\u540d\u8fd4\u56de \u4f2a\u9020 DNS \u7b54\u590d\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["Fake DNS \u4e0d\u7ba1\u662f\u539f\u7406\u4e0a\u8fd8\u662f\u5b9e\u73b0\u4e0a\u90fd\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u5982\u679c\u6709\u5174\u8da3\u53ef\u4ee5\u770b\u4e00\u4e0b ",(0,c.jsx)(e.a,{href:"https://github.com/eycorsican/leaf/blob/master/leaf/src/app/fake_dns.rs",children:"\u8fd9\u91cc\u7684\u5b9e\u73b0\u4ee3\u7801"})," \u3002"]}),"\n",(0,c.jsx)(e.h3,{id:"dns-fallback",children:"DNS Fallback"}),"\n",(0,c.jsxs)(e.p,{children:["\u63a5\u4e0b\u6765\u518d\u8bf4\u8bf4\u4e00\u79cd\u53eb\u505a DNS fallback \u7684\u6280\u672f\uff08\u8fd9\u4e2a\u540d\u5b57\u53ef\u80fd\u4e0d\u592a\u5bf9\uff09\uff0c\u5728\u4ee3\u7406\u670d\u52a1\u5668\u4e0d\u652f\u6301 UDP \u7684\u65f6\u5019\uff0c ",(0,c.jsx)(e.strong,{children:"\u5355\u7eaf\u7684\u5168\u5c40 TCP/UDP \u6d41\u91cf\u4ee3\u7406"})," \u5c31\u4f1a\u51fa\u95ee\u9898\u4e86\uff0c\u56e0\u4e3a\u8981\u89e3\u6790 DNS \u5c31\u9700\u8981 UDP\uff0c\u670d\u52a1\u5668\u4e0d\u652f\u6301 UDP \u5c31\u6ca1\u529e\u6cd5\u5904\u7406 DNS\uff0c\u4e5f\u5c31\u6ca1\u529e\u6cd5\u5904\u7406\u6240\u6709\u57df\u540d\u8bf7\u6c42\u4e86\uff0cDNS fallback \u662f\u4e00\u79cd\u53ef\u4ee5\u5f3a\u5236\u8ba9\u5e94\u7528\u7a0b\u5e8f\u628a DNS \u8bf7\u6c42\u4ee5 TCP \u6d41\u91cf\u53d1\u9001\u51fa\u53bb\u7684\u6280\u672f\u3002"]}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\u9700\u8981\u8bf4\u660e\u7684\u662f\uff0c\u5982\u679c\u7528\u4e86 V2Ray \u7684\u6280\u672f\uff0c\u6216\u8005 Fake DNS\uff0c\u90a3 DNS fallback \u662f\u6ca1\u5fc5\u8981\u7684\uff0cDNS fallback \u4e5f\u662f\u4e00\u79cd\u5904\u7406 DNS \u76f8\u5173\u95ee\u9898\u6280\u672f\uff0c\u8fd9\u91cc\u53ea\u662f\u60f3\u628a\u8fd9\u79cd\u6280\u672f\u4e5f\u5217\u4e3e\u51fa\u6765"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u4f17\u6240\u5468\u77e5\u4e00\u822c\u7684 DNS \u8bf7\u6c42\u90fd\u662f\u7528 UDP \u53d1\u7684\uff0c\u4f46 DNS \u7684 UDP \u62a5\u6587\u7684\u5927\u5c0f\u4f1a\u88ab\u9650\u5236\u5728\u5927\u6982 512 \u5b57\u8282\uff0c\u5982\u679c\u67d0\u4e2a DNS \u7b54\u590d\u5f88\u957f\uff0c\u8d85\u8fc7\u4e86\u8fd9\u4e2a\u9650\u5236\uff0c\u5c31\u4e0d\u80fd\u901a\u8fc7 UDP \u6765\u4f20\u8f93\u4e86\uff0c\u4e3a\u6b64 DNS \u89c4\u8303\u4e2d\u63d0\u51fa\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u8d85\u8fc7\u9650\u5236\u5927\u5c0f\u7684 DNS \u8bf7\u6c42\uff0cDNS \u670d\u52a1\u5668\u53ef\u4ee5\u5728\u7b54\u590d\u4e2d\u8bbe\u7f6e\u4e00\u4e2a flag\uff08truncated\uff09\uff0c\u6765\u544a\u8bc9\u5ba2\u6237\u7aef\u8fd9\u4e2a\u7b54\u590d\u592a\u957f\uff0c\u4f60\u4e0d\u80fd\u7528 UDP \u6765\u505a\u8fd9\u4e2a DNS \u8bf7\u6c42\uff0c\u8bf7\u7528 TCP\uff0c\u4e8e\u662f\u5ba2\u6237\u7aef\u5c31\u4f1a\u7528 TCP \u6765\u91cd\u65b0\u8bf7\u6c42 DNS\u3002"}),"\n",(0,c.jsx)(e.p,{children:"DNS fallback \u6b63\u662f\u5229\u7528\u4e86\u8fd9\u4e00\u70b9\uff0c\u5728 tun2socks \u7ed9\u8fc7\u6765\u7684 UDP \u6d41\u91cf\u4e2d\u8bc6\u522b\u51fa DNS \u8bf7\u6c42\uff0c\u7136\u540e\u4f2a\u9020\u4e00\u4e2a\u8bbe\u7f6e\u4e86 truncated flag \u7684\u7b54\u590d\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u5c31\u4f1a\u8f6c\u7528 TCP \u6765\u505a DNS \u8bf7\u6c42\u4e86\u3002"}),"\n",(0,c.jsxs)(e.p,{children:["DNS fallback \u7684\u5b9e\u73b0\u4e5f\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u6709\u5174\u8da3\u53ef\u4ee5\u770b\u4e00\u4e0b ",(0,c.jsx)(e.a,{href:"https://github.com/eycorsican/go-tun2socks/blob/master/proxy/dnsfallback/udp.go",children:"\u8fd9\u91cc\u7684\u4ee3\u7801"})," \u3002"]}),"\n",(0,c.jsx)(o,{children:(0,c.jsx)("link",{rel:"canonical",href:"https://tachyondevel.medium.com/%E6%BC%AB%E8%B0%88%E5%90%84%E7%A7%8D%E9%BB%91%E7%A7%91%E6%8A%80%E5%BC%8F-dns-%E6%8A%80%E6%9C%AF%E5%9C%A8%E4%BB%A3%E7%90%86%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-62c50e58cbd0"})})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(a,{...n})}):a(n)}}}]);