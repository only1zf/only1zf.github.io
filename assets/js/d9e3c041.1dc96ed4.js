"use strict";(self.webpackChunkpub=self.webpackChunkpub||[]).push([[986],{8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>a});var n=s(6540);const o={},t=n.createContext(o);function i(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(t.Provider,{value:r},e.children)}},8757:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>p});const n=JSON.parse('{"id":"supervisor","title":"\u6781\u7b80Supervisor","description":"Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems.","source":"@site/docs/supervisor.md","sourceDirName":".","slug":"/supervisor","permalink":"/docs/supervisor","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u6781\u7b80Supervisor","date":"2018-10-19T08:22:49Z"},"sidebar":"tutorialSidebar","previous":{"title":"SSH config","permalink":"/docs/ssh"},"next":{"title":"VC\u7f16\u8bd1\u9009\u9879","permalink":"/docs/vc"}}');var o=s(4848),t=s(8453);const i={title:"\u6781\u7b80Supervisor",date:"2018-10-19T08:22:49Z"},a=void 0,c={},p=[{value:"\u6700\u7b80 supervisord.conf",id:"\u6700\u7b80-supervisordconf",level:2},{value:"\u6700\u7b80 service.conf.sample",id:"\u6700\u7b80-serviceconfsample",level:2}];function l(e){const r={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.p,{children:"Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems."}),"\n",(0,o.jsx)(r.p,{children:"Supervisor \u662f\u6bd4\u8f83\u7b80\u5355\u7684\u521b\u5efa\u5b88\u62a4\u8fdb\u7a0b\u7684\u5de5\u5177\uff0c\u652f\u6301 linux \u548c macOS \u8fd9\u4e9b\u7c7b UNIX \u7cfb\u7edf\u3002\n\u5b83\u7684\u4f18\u52bf\u5728\u4e8e\u6bd4\u8f83\u8f7b\u91cf\u3001\u4e0d\u9700\u8981 root \u6743\u9650\u3001\u914d\u7f6e\u7b80\u5355\u3001\u8de8\u5e73\u53f0\u3002\u5f00\u53d1\u65f6\u6bd4\u8f83\u597d\u7528\u3002"}),"\n",(0,o.jsx)(r.p,{children:"Supervisor \u4e3b\u8981\u6709 supervisord \u548c supervisorctl\uff0c\u5206\u522b\u662f\u670d\u52a1\u548c\u63a7\u5236\u53f0\u5de5\u5177\u3002"}),"\n",(0,o.jsxs)(r.p,{children:["\u8be6\u7ec6\u6587\u6863\u53c2\u89c1\uff1a",(0,o.jsx)(r.a,{href:"http://supervisord.org/",children:"Supervisor"})]}),"\n",(0,o.jsx)(r.h2,{id:"\u6700\u7b80-supervisordconf",children:"\u6700\u7b80 supervisord.conf"}),"\n",(0,o.jsx)(r.p,{children:"Environment variables that are present in the environment at the time that supervisord is started can be used in the configuration file using the Python string expression syntax %(ENV_X)s.\nsupervisord \u542f\u52a8\u65f6\u7684\u7cfb\u7edf\u73af\u5883\u53d8\u91cf X \u7528%(ENV_X)s \u53ef\u4ee5\u53d6\u5230\u3002"}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.a,{href:"http://supervisord.org/configuration.html",children:"Configuration File"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ini",children:"; supervisord.conf\n[include]\n; A space-separated sequence of file globs. Each file glob may be absolute or relative.\n; \u8fd9\u91cc\u914d\u7f6e\u7684files\u662f\u5305\u542b\u672c\u5730\u76ee\u5f55\u6240\u6709.conf.sample\u7684\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e2a\u670d\u52a1\u53ef\u4ee5\u5355\u72ec\u5efa\u4e00\u4e2aservice.conf.sample\n; service.conf.sample\u89c1\u540e\nfiles = %(ENV_PWD)s/*.conf.sample\n\n; The [rpcinterface:supervisor] section must remain in the configuration for the standard setup of supervisor to work properly.\n[rpcinterface:supervisor]\nsupervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface\n\n; The configuration file may contain settings for the supervisorctl interactive shell program.\n[supervisorctl]\n; The URL that should be used to access the supervisord server, e.g. http://localhost:9001. For UNIX domain sockets, use unix:///absolute/path/to/file.sock.\n; supervisorctl\u8fde\u63a5supervisord\u7684URL\nserverurl = unix:///tmp/supervisor.sock\n\n; The supervisord.conf file contains a section named [supervisord] in which global settings related to the supervisord process should be inserted. These are as follows.\n[supervisord]\n; When supervisord daemonizes, switch to this directory. This option can include the value %(here)s, which expands to the directory in which the supervisord configuration file was found.\n; supervisord\u5207\u6362\u81f3conf\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u8fd0\u884c\ndirectory = %(here)s\n\n; The supervisord.conf file contains a section named [unix_http_server] under which configuration parameters for an HTTP server that listens on a UNIX domain socket should be inserted. If the configuration file has no [unix_http_server] section, a UNIX domain socket HTTP server will not be started.\n[unix_http_server]\n; A path to a UNIX domain socket (e.g. /tmp/supervisord.sock) on which supervisor will listen for HTTP/XML-RPC requests. supervisorctl uses XML-RPC to communicate with supervisord over this port.\n; supervisord\u76d1\u542c\u7684socket\uff0csupervisorctl\u9700\u8981\u8fde\u63a5\u6b64socket\u624d\u80fd\u63a7\u5236supervisord\nfile = /tmp/supervisor.sock\n"})}),"\n",(0,o.jsx)(r.h2,{id:"\u6700\u7b80-serviceconfsample",children:"\u6700\u7b80 service.conf.sample"}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsxs)(r.a,{href:"http://supervisord.org/configuration.html#program-x-section-settings",children:["[program",":x","] Section Settings"]})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ini",children:'; service.conf.sample\n; The configuration file must contain one or more program sections in order for supervisord to know which programs it should start and control. The header value is composite value. It is the word \u201cprogram\u201d, followed directly by a colon, then the program name.\n[program:service]\n; The command that will be run when this program is started. The command can be either absolute (e.g. /path/to/programname) or relative (e.g. programname). If it is relative, the supervisord\u2019s environment $PATH will be searched for the executable.\ncommand=%(ENV_PWD)s/service --port=8000\n; A list of key/value pairs in the form KEY="val",KEY2="val2" that will be placed in the child process\u2019 environment.\n; \u8fd9\u91cc\u7684\u914d\u7f6e\u662f\u5c06\u5b50\u8fdb\u7a0b\u7684\u65f6\u533a\u8bbe\u4e3aUTC 0\u65f6\u533a\nenvironment=TZ="UTC"\n'})})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);